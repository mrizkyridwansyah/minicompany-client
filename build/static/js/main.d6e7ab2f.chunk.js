(this.webpackJsonplogin=this.webpackJsonplogin||[]).push([[0],{148:function(e,t,a){},322:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a.n(c),s=a(28),i=a.n(s),o=r.a.createContext();function l(){return Object(c.useContext)(o)}function d(e,t){return j("".concat("https://mini-company-backend.herokuapp.com/api","/auth/login"),{username:e,password:t},!1,"POST").then((function(e){if(200!==e.status)throw new Error(e.body.message);sessionStorage.setItem("token",e.body.token),sessionStorage.setItem("id",e.body.data.id),sessionStorage.setItem("username",e.body.data.username),sessionStorage.setItem("name",e.body.data.name),sessionStorage.setItem("email",e.body.data.email),sessionStorage.setItem("role",e.body.data.role),sessionStorage.setItem("employeeId",e.body.data.employeeId)}))}function u(){return j("".concat("https://mini-company-backend.herokuapp.com/api","/auth/logout"),{},!0,"POST").then((function(e){if(200!==e.status)throw new Error(e.body.message);sessionStorage.removeItem("token"),sessionStorage.removeItem("id"),sessionStorage.removeItem("username"),sessionStorage.removeItem("name"),sessionStorage.removeItem("email"),sessionStorage.removeItem("role"),sessionStorage.removeItem("employeeId")}))}function j(e,t,a,n){var c={method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return a&&(c.headers={"Content-Type":"application/json",Authorization:"BEARER ".concat(sessionStorage.getItem("token"))}),fetch(e,c).then((function(e){return e.json().then((function(t){return{status:e.status,body:t}}))}))}function b(e){var t=e.children,a={fetchQuery:j,login:d,logout:u};return Object(n.jsx)(o.Provider,{value:a,children:t})}var p=a(44),h=a(137),O=a(14);function m(e){var t=e.component,a=Object(h.a)(e,["component"]);return Object(n.jsx)(O.b,Object(p.a)(Object(p.a)({},a),{},{render:function(e){return null!==sessionStorage.getItem("token")?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(t.topbar,Object(p.a)({},e)),Object(n.jsx)("div",{className:"container-fluid mb-5",style:{overflowY:"auto"},children:Object(n.jsxs)("div",{className:"row mb-5",children:[Object(n.jsx)(t.sidebar,Object(p.a)({},e)),Object(n.jsx)("main",{className:"col-md-9 ml-sm-auto col-lg-10 px-4",children:Object(n.jsx)("div",{className:"row",style:{minHeight:"80vh"},children:Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(t.content,Object(p.a)({},e))})})})})]})}),Object(n.jsx)("footer",{className:"mastfoot text-center bg-dark mb-0 py-1",style:{position:"fixed"},children:Object(n.jsx)("div",{className:"inner",children:Object(n.jsxs)("p",{children:["Cover template for ",Object(n.jsx)("a",{href:"https://getbootstrap.com/",children:"Bootstrap"}),", by ",Object(n.jsx)("a",{href:"https://www.instagram.com/mrizkyridwansyah",children:"M. Rizky Ridwansyah"}),"."]})})})]}):Object(n.jsx)(O.a,{to:"/login"})}}))}var x=a(2),f=a.n(x),y=a(4),v=a(3);function g(){var e=Object(c.useState)(""),t=Object(v.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(""),i=Object(v.a)(s,2),o=i[0],d=i[1],u=Object(c.useState)(""),j=Object(v.a)(u,2),b=j[0],p=j[1],h=l().logout,m=Object(O.g)();function x(){return(x=Object(y.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(""),e.next=4,h();case 4:m.push("/login"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0.message),alert(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){d(sessionStorage.getItem("name")),p(sessionStorage.getItem("role"))}),[]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("nav",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow",children:[Object(n.jsx)("a",{className:"navbar-brand col-md-3 col-lg-2 mr-0 px-3",href:"/",children:"my Apps"}),Object(n.jsx)("button",{className:"navbar-toggler position-absolute d-md-none collapsed",type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("ul",{className:"navbar-nav px-3",children:Object(n.jsxs)("li",{className:"nav-item text-nowrap dropdown",children:[Object(n.jsxs)("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[" ",o," - ",b]}),Object(n.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",style:{position:"absolute"},children:[Object(n.jsx)("a",{className:"dropdown-item",href:"/profile",children:"Profile"}),Object(n.jsx)("div",{className:"dropdown-divider"}),Object(n.jsx)("a",{className:"dropdown-item",onClick:function(){return x.apply(this,arguments)},children:"Log Out"})]})]})})]})})}var k=a(332);a(148);function w(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("nav",{className:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse",id:"sidebarMenu",style:{overflowY:"auto"},children:Object(n.jsxs)("div",{className:"sidebar-sticky",children:[Object(n.jsx)("ul",{className:"nav flex-column",children:Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-bar-chart fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Dashboard"})]})})}),Object(n.jsx)("h6",{className:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-2 text-muted",children:Object(n.jsx)("span",{children:"Cash Book"})}),Object(n.jsxs)("ul",{className:"nav flex-column",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-indent fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Penerimaan"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-outdent fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Pengeluaran"})]})})]}),Object(n.jsx)("h6",{className:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-2 text-muted",children:Object(n.jsx)("span",{children:"Pembelian"})}),Object(n.jsxs)("ul",{className:"nav flex-column",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-bank fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Pemasok"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-shopping-cart fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Pesanan"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-indent fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Penerimaan"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-undo fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Retur"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-book fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Faktur"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-usd fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Pembayaran"})]})})]}),Object(n.jsx)("h6",{className:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-2 text-muted",children:Object(n.jsx)("span",{children:"Penjualan"})}),Object(n.jsxs)("ul",{className:"nav flex-column",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-bank fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Pelanggan"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-outdent fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Pengiriman"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-undo fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Retur"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-book fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Faktur"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-usd fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Penerimaan"})]})})]}),Object(n.jsx)("h6",{className:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-2 text-muted",children:Object(n.jsx)("span",{children:"Accounting"})}),Object(n.jsxs)("ul",{className:"nav flex-column",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-bank fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Account"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-book fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Jurnal"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-check-circle fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Closing"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-file-text fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Report"})]})})]}),Object(n.jsx)("h6",{className:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-2 text-muted",children:Object(n.jsx)("span",{children:"Persediaan"})}),Object(n.jsxs)("ul",{className:"nav flex-column",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-cog fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Satuan Barang"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{children:[Object(n.jsx)("i",{className:"fa fa-archive fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Barang"})]})})]}),Object(n.jsx)("h6",{className:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-2 text-muted",children:Object(n.jsx)("span",{children:"Setup Perusahaan"})}),Object(n.jsxs)("ul",{className:"nav flex-column",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{href:"/role",children:[Object(n.jsx)("i",{className:"fa fa-database fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Project"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{href:"/role",children:[Object(n.jsx)("i",{className:"fa fa-list-ol fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Numerator"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{href:"/role",children:[Object(n.jsx)("i",{className:"fa fa-cog fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Params"})]})})]}),Object(n.jsx)("h6",{className:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-2 text-muted",children:Object(n.jsx)("span",{children:"Settings (Sys-Master)"})}),Object(n.jsxs)("ul",{className:"nav flex-column",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{href:"/role",children:[Object(n.jsx)("i",{className:"fa fa-cog fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Role"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(k.a.Link,{href:"/user",children:[Object(n.jsx)("i",{className:"fa fa-user fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"User"})]})})]})]})})})}function S(){return Object(n.jsx)(n.Fragment,{})}var N=a(333),C=a(324),q=a(331),D=a(325),R=a(6);function L(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=l().login,r=Object(c.useState)(""),s=Object(v.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)(!1),u=Object(v.a)(d,2),j=u[0],b=u[1],p=Object(O.g)();function h(){return(h=Object(y.a)(f.a.mark((function n(c){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),n.prev=1,o(""),b(!0),n.next=6,a(e.current.value,t.current.value);case 6:p.push("/"),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),o(n.t0.message),b(!1);case 13:b(!1);case 14:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return sessionStorage.getItem("token")&&p.push("/"),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"d-flex align-items-center justify-content-center mt-5",children:Object(n.jsx)(N.a,{className:"w-100 mt-5",style:{maxWidth:"400px",boxShadow:"5px 5px 5px #0062cc"},children:Object(n.jsxs)(N.a.Body,{children:[Object(n.jsx)("h2",{className:"text-center mt-3",children:"Log In"}),i&&Object(n.jsx)(C.a,{variant:"danger",children:i}),Object(n.jsxs)(q.a,{onSubmit:function(e){return h.apply(this,arguments)},children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Username"}),Object(n.jsx)(q.a.Control,{type:"text",ref:e,required:!0,autoFocus:!0}),Object(n.jsx)(q.a.Label,{children:"Password"}),Object(n.jsx)(q.a.Control,{type:"password",ref:t,required:!0})]}),Object(n.jsx)(D.a,{type:"submit",className:"w-100",disabled:j,children:"Log In"})]}),Object(n.jsx)("div",{className:"w-100 text-center mt-3",children:Object(n.jsx)(R.b,{to:"/forgot-password",children:"Forgot Password ?"})})]})})})})}var P=a(134),T=a(334),F=a(326);function A(e){var t=e.app,a=e.handleDelete,c=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[t.name,Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:a,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;c.push("/application/edit/".concat(t))},children:"Edit"}),Object(n.jsx)(F.a,{variant:"success",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;c.push("/menu/".concat(t))},children:"Menu"})]})})})}function I(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/app"),t=Object(c.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=l(),S=w.fetchQuery,L=w.logout,T=Object(c.useRef)(),F=Object(O.g)();function I(){return G.apply(this,arguments)}function G(){return(G=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",k(""),h(!0),a={query:"query {\n                apps ".concat(t," { id, name, desc }\n            }")},S("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:s(t.body.data.apps),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return U.apply(this,arguments)}function U(){return(U=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),I('(search: "'.concat(T.current.value,'")'));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return B.apply(this,arguments)}function B(){return(B=Object(y.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),window.confirm("Are you sure want to delete this data?")&&(h(!0),k(""),n=a.target.dataset.id,S("".concat(e,"/").concat(n),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:u(!d),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){I()}),[d]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Application"}),Object(n.jsxs)("div",{className:"mt-4",children:[g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(R.b,{to:"/application/add",className:"btn btn-primary",children:"Add New Application"}),Object(n.jsx)(q.a,{className:"mt-4",children:Object(n.jsxs)(q.a.Row,{onSubmit:E,children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:T,placeholder:"Search by Name",onChange:E,disabled:p})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:p,children:"Search"})})})]})}),r.length>0?Object(n.jsx)(N.a,{style:{width:"30em"},className:"mt-4",children:r.map((function(e){return Object(n.jsx)(A,{app:e,handleDelete:V},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function G(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/app/"),t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(""),S=Object(v.a)(w,2),N=S[0],L=S[1],T=Object(c.useState)(""),F=Object(v.a)(T,2),A=F[0],I=F[1],G=Object(c.useRef)(),E=Object(c.useRef)(),U=Object(O.g)(),V=l(),B=V.fetchQuery,Q=V.logout;return Object(c.useEffect)((function(){if("edit"===r){k(""),u(!0);var e={query:'query {\n                    app (id: "'.concat(s,'") { id, name, desc }\n                }')};B("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,Q();case 5:U.push("/login");case 6:k(t.body.message),e.next=12;break;case 9:L(t.body.data.app.name),I(t.body.data.app.desc),k("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," Application"]}),g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),u(!0),k("");var n={name:G.current.value,desc:E.current.value};"edit"===r&&(e="".concat(e).concat(s),t="PUT"),B(e,n,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,Q();case 4:U.push("/login");case 5:k(t.body.message),e.next=11;break;case 8:h(!p),k(""),U.push("/application");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)},children:Object(n.jsxs)(P.a,{md:"5",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Name"}),Object(n.jsx)(q.a.Control,{type:"text",ref:G,defaultValue:N,autoFocus:!0,disabled:d,required:!0})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Description"}),Object(n.jsx)(q.a.Control,{as:"textarea",ref:E,defaultValue:A,rows:3,disabled:d,required:!0})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:d,children:"Submit"}),!d&&Object(n.jsx)(R.b,{to:"/application",className:"btn btn-danger",disabled:d,children:"Cancel"})]})})]})}var E=a(328),U=a(327);function V(e){var t=e.menu,a=e.menus,r=e.handleDelete,s=e.handleEdit,i=Object(c.useState)(!1),o=Object(v.a)(i,2),l=o[0],d=o[1],u=a.filter((function(e){return e.parent===t.name}));return console.log(u),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[t.name,Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},onClick:r,"data-id":t.id,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},onClick:s,"data-id":t.id,children:"Edit"}),Object(n.jsxs)(F.a,{variant:"secondary",className:"ml-2",style:{float:"right",cursor:"pointer"},onClick:function(){return d((function(e){return!e}))},children:[l?"Hide":"Show"," Detail"]}),Object(n.jsx)(U.a,{in:l,children:Object(n.jsx)("ul",{className:"mt-2",children:u.map((function(e){return Object(n.jsxs)("li",{children:[e.name,Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":e.id,onClick:r,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":e.id,onClick:s,children:"Edit"})]},e.id)}))})})]})})})}function B(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/menu/"),t="POST",a=Object(c.useState)([]),r=Object(v.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)([]),d=Object(v.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)(!1),p=Object(v.a)(b,2),h=p[0],m=p[1],x=Object(c.useState)(!1),g=Object(v.a)(x,2),k=g[0],w=g[1],S=Object(c.useState)(""),L=Object(v.a)(S,2),T=L[0],F=L[1],A=Object(c.useState)(!1),I=Object(v.a)(A,2),G=I[0],U=I[1],B=Object(c.useState)(""),Q=Object(v.a)(B,2),M=Q[0],J=Q[1],z=Object(c.useState)(""),H=Object(v.a)(z,2),W=H[0],_=H[1],Y=Object(c.useState)(""),K=Object(v.a)(Y,2),X=K[0],Z=K[1],$=Object(c.useState)(""),ee=Object(v.a)($,2),te=ee[0],ae=ee[1],ne=Object(c.useState)(""),ce=Object(v.a)(ne,2),re=ce[0],se=ce[1],ie=Object(c.useState)(""),oe=Object(v.a)(ie,2),le=oe[0],de=oe[1],ue=Object(c.useRef)(),je=Object(c.useRef)(),be=Object(c.useRef)(),pe=Object(c.useRef)(),he=Object(O.g)(),Oe=Object(O.h)().id,me=l(),xe=me.fetchQuery,fe=me.logout;function ye(e){m(!0),function(e){F(""),w(!0);var a={query:'query{\n                menu(id: "'.concat(e,'") { id, name, app, entryPoint, logo, parent }              \n            }')};xe("https://mini-company-backend.herokuapp.com/graphql",a,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,fe();case 4:he.push("/login");case 5:F(t.body.message),e.next=14;break;case 8:_(t.body.data.menu.id),Z(t.body.data.menu.name),ae(t.body.data.menu.entryPoint),se(t.body.data.menu.logo),de(t.body.data.menu.parent),F("");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w(!1)}(e.target.dataset.id)}function ve(t){if(window.confirm("Are you sure want delete this menu?")){w(!0),F("");var a=t.target.dataset.id;xe("".concat(e).concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,fe();case 4:he.push("/login");case 5:F(t.body.message),e.next=10;break;case 8:U(!G),F("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m(!1),w(!1)}}return Object(c.useEffect)((function(){!function(){F(""),w(!0);var e={query:'query{\n                app(id: "'.concat(Oe,'") { id, name },\n                menus(idApp: "').concat(Oe,'") { id, name, app, entryPoint, logo, parent }              \n            }')};xe("https://mini-company-backend.herokuapp.com/graphql",e,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,fe();case 4:he.push("/login");case 5:F(t.body.message),e.next=11;break;case 8:J(t.body.data.app.name),i(t.body.data.menus),F("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w(!1)}(),function(){F(""),w(!0);var e={query:'query{\n                menus(idApp: "'.concat(Oe,'", parent: true) { id, name, app, entryPoint, logo, parent }              \n            }')};xe("https://mini-company-backend.herokuapp.com/graphql",e,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,fe();case 4:he.push("/login");case 5:F(t.body.message),e.next=10;break;case 8:j(t.body.data.menus),F("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w(!1)}()}),[G]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{className:"mb-4",children:["Setup Menu ",M]}),T&&Object(n.jsx)(C.a,{variant:"danger",children:T}),Object(n.jsxs)(E.a,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a,{onSubmit:function(a){a.preventDefault(),w(!0),F("");var n={name:ue.current.value,entryPoint:je.current.value};"-"!==pe.current.value&&(n.parent=pe.current.value),""!==be.current.value&&(n.logo=be.current.value),h?(e="".concat(e).concat(W),t="PUT"):n.application=Oe,xe(e,n,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,fe();case 4:he.push("/login");case 5:F(t.body.message),e.next=10;break;case 8:F(""),window.location.reload();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m(!1),w(!1)},children:[Object(n.jsx)(P.a,{md:"8",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Name"}),Object(n.jsx)(q.a.Control,{type:"text",ref:ue,autoFocus:!0,disabled:k,required:!0,defaultValue:X})]})}),Object(n.jsx)(P.a,{md:"8",children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Entry Point"}),Object(n.jsx)(q.a.Control,{type:"text",ref:je,disabled:k,required:!0,defaultValue:te})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Logo"}),Object(n.jsx)(q.a.Control,{type:"text",ref:be,disabled:k,defaultValue:re})]})})]})}),Object(n.jsx)(P.a,{md:"8",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Parent Menu"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:pe,value:le,onChange:function(e){return de(e.target.value)},children:[Object(n.jsx)("option",{value:"-",children:"Select Menu"}),u.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]})}),Object(n.jsxs)(P.a,{md:"8",children:[Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:k,children:"Submit"}),!k&&Object(n.jsx)(R.b,{to:"/application",className:"btn btn-danger",disabled:k,children:"Cancel"})]})]})}),Object(n.jsxs)(P.a,{md:"4",style:{borderLeft:".25em solid"},children:[Object(n.jsxs)("h5",{className:"text-muted mb-4",children:["List Menu ",M]}),s.length>0?Object(n.jsx)(N.a,{children:s.map((function(e){if(!e.parent)return Object(n.jsx)(V,{menu:e,menus:s,handleDelete:ve,handleEdit:ye},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})]})}function Q(e){var t=e.role,a=e.handleDelete,c=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[t.name,Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:a,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;c.push("/role/edit/".concat(t))},children:"Edit"})]})})})}function M(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/role"),t=Object(c.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=l(),S=w.fetchQuery,L=w.logout,T=Object(c.useRef)(),F=Object(O.g)();function A(){return I.apply(this,arguments)}function I(){return(I=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",k(""),h(!0),a={query:"query {\n                roles ".concat(t," { id, name }\n            }")},S("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:s(t.body.data.roles),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){e.preventDefault(),A('(search: "'.concat(T.current.value,'")'))}function E(t){if(t.preventDefault(),window.confirm("Are you sure want to delete this data?")){h(!0),k("");var a=t.target.dataset.id;S("".concat(e,"/").concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:u(!d),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1)}}return Object(c.useEffect)((function(){A()}),[d]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Roles"}),Object(n.jsxs)("div",{className:"mt-4",children:[g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(R.b,{to:"/role/add",className:"btn btn-primary",children:"Add New Role"}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:G,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"5",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:T,onChange:G,disabled:p,placeholder:"Search by Name"})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:p,children:"Search"})})})]})}),r.length>0?Object(n.jsx)(N.a,{style:{width:"25em"},className:"mt-4",children:r.map((function(e){return Object(n.jsx)(Q,{role:e,handleDelete:E},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function J(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/role/"),t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(""),S=Object(v.a)(w,2),N=S[0],L=S[1],T=Object(c.useRef)(),F=Object(O.g)(),A=l(),I=A.fetchQuery,G=A.logout;return Object(c.useEffect)((function(){if("edit"===r){k(""),u(!0);var e={query:'query {\n                    role (id: "'.concat(s,'") { id, name }\n                }')};I("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,G();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:L(t.body.data.role.name),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," Role"]}),g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),u(!0),k("");var n={name:T.current.value};"edit"===r&&(e="".concat(e).concat(s),t="PUT"),I(e,n,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,G();case 4:F.push("/login");case 5:k(t.body.message),e.next=11;break;case 8:h(!p),k(""),F.push("/role");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)},children:Object(n.jsxs)(P.a,{md:"5",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Name"}),Object(n.jsx)(q.a.Control,{type:"text",ref:T,defaultValue:N,autoFocus:!0,disabled:d,required:!0})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:d,children:"Submit"}),!d&&Object(n.jsx)(R.b,{to:"/role",className:"btn btn-danger",disabled:d,children:"Cancel"})]})})]})}function z(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/access"),t=Object(c.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)([]),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)([]),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(!1),S=Object(v.a)(w,2),N=S[0],R=S[1],L=l(),P=L.fetchQuery,T=L.logout,F=Object(O.g)();function A(){return(A=Object(y.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(""),R(!0),P("https://mini-company-backend.herokuapp.com/graphql",{query:"query {\n                roles { id, name },\n                apps { id, name, menu { id, name, parent } }\n                accessRole {id, role, app, menu }\n            }"},!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,T();case 4:F.push("/login");case 5:k(t.body.message),e.next=12;break;case 8:h(t.body.data.accessRole),u(t.body.data.roles),s(t.body.data.apps),k("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,a){return p.filter((function(n){return n.role===e&&n.app===t&&n.menu===a})).length>0}function G(e){document.querySelectorAll("input[name='menu[]']").forEach((function(t){t.dataset.role===e.target.dataset.role&&(t.checked=e.target.checked)}))}return Object(c.useEffect)((function(){!function(){A.apply(this,arguments)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{className:"mb-4",children:"Setup Access Role"}),g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsxs)(q.a,{onSubmit:function(t){t.preventDefault(),k(""),R(!0);for(var a=t.target.length,n=[],c=0;c<a-1;c++)if("menu[]"===t.target[c].name){var r=t.target[c].dataset.role,s=t.target[c].dataset.app,i=t.target[c].checked,o=t.target[c].value;i&&n.push({role:r,app:s,menu:o})}P(e,{data:n},!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,T();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:k(""),window.location.reload();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R(!1)},children:[Object(n.jsxs)("table",{className:"table table-bordered table-hover text-center wrap-center",children:[Object(n.jsxs)("thead",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{rowSpan:"3",colSpan:"2",children:"#"}),r.map((function(e){return Object(n.jsx)("td",{colSpan:e.menu.filter((function(e){return null!==e.parent})).length,style:{whiteSpace:"nowrap"},children:e.name},e.id)}))]}),Object(n.jsx)("tr",{children:r.map((function(e){var t=e.menu;return 0===t.length?Object(n.jsx)("td",{}):t.map((function(e){if(null===e.parent)return Object(n.jsx)("td",{colSpan:t.filter((function(t){return t.parent===e.name})).length,style:{whiteSpace:"nowrap"},children:e.name},e.id)}))}))}),Object(n.jsx)("tr",{children:r.map((function(e){var t=e.menu;return 0===t.length?Object(n.jsx)("td",{}):t.map((function(e){if(null!==e.parent)return Object(n.jsx)("td",{style:{whiteSpace:"nowrap"},children:e.name},e.id)}))}))})]}),Object(n.jsx)("tbody",{children:d.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{style:{whiteSpace:"nowrap"},children:e.name}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{type:"checkbox",style:{marginLeft:"0"},className:"form-check-input position-static","data-role":e.name,onChange:G})}),r.map((function(t){return t.menu.map((function(a,c){if(null!==a.parent)return Object(n.jsx)("td",{children:Object(n.jsx)(q.a.Check,{"data-role":e.name,"data-app":t.name,value:a.name,name:"menu[]",defaultChecked:I(e.name,t.name,a.name)})})}))}))]})}))}),Object(n.jsx)("tfoot",{})]}),Object(n.jsx)(D.a,{type:"submit",disabled:N,children:"Mapping Access"})]})]})}function H(e){var t=e.user,a=(e.from,e.handleDelete),c=e.handleUpdateStatus,r=e.handleChoose,s=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[t.name," (",t.role,")","setupapproval"===window.location.pathname.split("/")[1]&&Object(n.jsx)(F.a,{variant:"primary",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:r,children:"Choose"}),"setupapproval"!==window.location.pathname.split("/")[1]&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(F.a,{variant:t.activeFlag?"secondary":"success",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-status":t.activeFlag,"data-id":t.id,onClick:c,children:t.activeFlag?"Disable":"Activate"}),Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:a,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;s.push("/user/edit/".concat(t))},children:"Edit"})]})]})})})}function W(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/user"),t=Object(c.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)([]),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(!1),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(""),S=Object(v.a)(w,2),L=S[0],T=S[1],F=l(),A=F.fetchQuery,I=F.logout,G=Object(c.useRef)(),E=Object(c.useRef)(),U=Object(c.useRef)(),V=Object(O.g)();function B(){return(B=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",T(""),k(!0),a={query:"query {\n                roles ".concat(t," { id, name }\n            }")},A("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,I();case 5:V.push("/login");case 6:T(t.body.message),e.next=11;break;case 9:u(t.body.data.roles),T("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return M.apply(this,arguments)}function M(){return(M=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",T(""),k(!0),a={query:"query {\n                users ".concat(t," { id, username, name, email, role, activeFlag }\n            }")},A("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,I();case 4:V.push("/login");case 5:T(t.body.message),e.next=10;break;case 8:s(t.body.data.users),T("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){e.preventDefault();var t=""!==E.current.value?", active: ".concat(E.current.value):"",a=""!==U.current.value?', role: "'.concat(U.current.value,'"'):"";Q('(search: "'.concat(G.current.value,'"').concat(t).concat(a,")"))}function z(t){if(t.preventDefault(),window.confirm("Are you sure want to delete this data?")){var a=t.target.dataset.id;A("".concat(e,"/").concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,I();case 4:V.push("/login");case 5:T(t.body.message),e.next=10;break;case 8:h(!p),T("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k(!1)}}function W(t){t.preventDefault();var a="true"===t.target.dataset.status?"block":"activate";if(window.confirm("Are you sure want to ".concat(a," this user?"))){k(!0),T("");var n=t.target.dataset.id;A("".concat(e,"/updatestatus/").concat(n),{},!0,"PUT").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,I();case 4:V.push("/login");case 5:T(t.body.message),e.next=10;break;case 8:h(!p),T("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k(!1)}}return Object(c.useEffect)((function(){Q(),function(){B.apply(this,arguments)}()}),[p]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Users"}),Object(n.jsxs)("div",{className:"mt-4",children:[L&&Object(n.jsx)(C.a,{variant:"danger",children:L}),Object(n.jsx)(R.b,{to:"/user/add",className:"btn btn-primary",children:"Add New User"}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:J,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"5",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:G,onChange:J,disabled:g,placeholder:"Search by Name"})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsxs)(q.a.Control,{as:"select",ref:E,onChange:J,children:[Object(n.jsx)("option",{value:"",children:"All Status"}),Object(n.jsx)("option",{value:"true",children:"Active"}),Object(n.jsx)("option",{value:"false",children:"Inactive"})]})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsxs)(q.a.Control,{as:"select",ref:U,onChange:J,children:[Object(n.jsx)("option",{value:"",children:"All Role"}),d.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name})}))]})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:g,children:"Search"})})})]})}),r.length>0?Object(n.jsx)(N.a,{style:{width:"40em"},className:"mt-4",children:r.map((function(e){if(e.id!==sessionStorage.getItem("id"))return Object(n.jsx)(H,{user:e,handleDelete:z,handleUpdateStatus:W},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function _(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/user/"),t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(""),S=Object(v.a)(w,2),N=S[0],L=S[1],T=Object(c.useState)(""),F=Object(v.a)(T,2),A=F[0],I=F[1],G=Object(c.useState)(""),E=Object(v.a)(G,2),U=E[0],V=E[1],B=Object(c.useState)(""),Q=Object(v.a)(B,2),M=Q[0],J=Q[1],z=Object(c.useState)([]),H=Object(v.a)(z,2),W=H[0],_=H[1],Y=Object(c.useRef)(),K=Object(c.useRef)(),X=Object(c.useRef)(),Z=Object(c.useRef)(),$=Object(c.useRef)(),ee=Object(c.useRef)(),te=Object(O.g)(),ae=l(),ne=ae.fetchQuery,ce=ae.logout;return Object(c.useEffect)((function(){if(k(""),u(!0),ne("https://mini-company-backend.herokuapp.com/graphql",{query:"query {\n                roles { id, name }\n            }"},!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ce();case 4:te.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:_(t.body.data.roles),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1),"edit"===r){k(""),u(!0);var e={query:'query {\n                    user (id: "'.concat(s,'") { id, name, username, email, role }\n                }')};ne("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ce();case 4:te.push("/login");case 5:k(t.body.message),e.next=13;break;case 8:L(t.body.data.user.name),J(t.body.data.user.role),V(t.body.data.user.username),I(t.body.data.user.email),k("");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," User"]}),g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),u(!0),k("");var n={username:X.current.value,name:Y.current.value,email:K.current.value,role:ee.current.value};""!==Z.current.value&&""!==$.current.value&&(n.password=Z.current.value,n.confirmPassword=$.current.value),"edit"===r&&(e="".concat(e).concat(s),t="PUT"),ne(e,n,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ce();case 4:te.push("/login");case 5:k(t.body.message),e.next=11;break;case 8:h(!p),k(""),te.push("/user");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)},children:Object(n.jsxs)(P.a,{md:"6",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Name"}),Object(n.jsx)(q.a.Control,{type:"text",ref:Y,defaultValue:N,autoFocus:!0,disabled:d,required:!0})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Email"}),Object(n.jsx)(q.a.Control,{type:"email",ref:K,defaultValue:A,disabled:d,required:!0})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Username"}),Object(n.jsx)(q.a.Control,{type:"text",ref:X,defaultValue:U,disabled:d,required:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Role"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:ee,disabled:d,value:M,onChange:function(e){return J(e.target.value)},children:[Object(n.jsx)("option",{value:"",hidden:!0,children:"Select Role"}),W.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]})})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Password"}),Object(n.jsx)(q.a.Control,{type:"password",ref:Z,disabled:d})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Confirmation Password"}),Object(n.jsx)(q.a.Control,{type:"password",ref:$,disabled:d})]})})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:d,children:"Submit"}),!d&&Object(n.jsx)(R.b,{to:"/user",className:"btn btn-danger",disabled:d,children:"Cancel"})]})})]})}function Y(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/user/"),t=Object(c.useState)(!1),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(""),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(""),S=Object(v.a)(w,2),N=S[0],L=S[1],T=Object(c.useState)(""),F=Object(v.a)(T,2),A=F[0],I=F[1],G=Object(c.useRef)(),E=Object(c.useRef)(),U=Object(c.useRef)(),V=Object(c.useRef)(),B=Object(c.useRef)(),Q=Object(O.g)(),M=l(),J=M.fetchQuery,z=M.logout,H=sessionStorage.getItem("id");return Object(c.useEffect)((function(){!function(){h(""),s(!0);var e={query:'query {\n                user (id: "'.concat(H,'") { id, name, username, email, role }\n            }')};J("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,z();case 4:Q.push("/login");case 5:h(t.body.message),e.next=12;break;case 8:k(t.body.data.user.name),I(t.body.data.user.username),L(t.body.data.user.email),h("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s(!1)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Profile"}),p&&Object(n.jsx)(C.a,{variant:"danger",children:p}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(t){t.preventDefault(),s(!0),h(""),e="".concat(e).concat(H);var a={username:U.current.value,name:G.current.value,email:E.current.value,role:sessionStorage.getItem("role")};""!==V.current.value&&""!==B.current.value&&(a.password=V.current.value,a.confirmPassword=B.current.value),J(e,a,!0,"PUT").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,z();case 4:Q.push("/login");case 5:h(t.body.message),e.next=11;break;case 8:u(!d),h(""),Q.push("/");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s(!1)},children:Object(n.jsxs)(P.a,{md:"6",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Name"}),Object(n.jsx)(q.a.Control,{type:"text",ref:G,defaultValue:g,autoFocus:!0,disabled:r,required:!0})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Username"}),Object(n.jsx)(q.a.Control,{type:"text",ref:U,defaultValue:A,disabled:r,required:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Email"}),Object(n.jsx)(q.a.Control,{type:"email",ref:E,defaultValue:N,disabled:r,required:!0})]})})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Password"}),Object(n.jsx)(q.a.Control,{type:"password",ref:V,disabled:r})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Confirmation Password"}),Object(n.jsx)(q.a.Control,{type:"password",ref:B,disabled:r})]})})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:r,children:"Submit"}),!r&&Object(n.jsx)(R.b,{to:"/",className:"btn btn-danger",disabled:r,children:"Cancel"})]})})]})}var K=a(52),X=a.n(K);function Z(e){var t=e.job,a=e.handleClose,r=e.handlePublish,s=Object(c.useState)(!1),i=Object(v.a)(s,2),o=i[0],l=i[1],d=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(N.a,{className:"col-md-8 mt-3",children:Object(n.jsxs)(N.a.Body,{children:[Object(n.jsx)("div",{className:"d-flex justify-content-between",children:Object(n.jsxs)("div",{children:[Object(n.jsxs)(N.a.Title,{children:[t.type," - ",t.title,"false"===t.closedFlag&&"/job"===window.location.pathname&&Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},onClick:a,"data-id":t.id,children:"Closed"}),"false"===t.publishedFlag&&"/job"===window.location.pathname&&"false"===t.closedFlag&&Object(n.jsx)(F.a,{variant:"success",className:"ml-2",style:{float:"right",cursor:"pointer"},onClick:r,"data-id":t.id,children:"Published"}),"/job"===window.location.pathname&&Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},onClick:function(e){var t=e.target.dataset.id;d.push("/job/edit/".concat(t))},"data-id":t.id,children:"Edit"}),"/qna"===window.location.pathname&&Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},onClick:function(e){var t=e.target.dataset.id;d.push("/qna/list/".concat(t))},"data-id":t.id,children:"Question"}),"/applications"===window.location.pathname&&Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},onClick:function(e){var t=e.target.dataset.id;d.push("/applications/list/".concat(t))},"data-id":t.id,children:"Applications"})]}),Object(n.jsx)(N.a.Subtitle,{className:"text-muted mb-2",children:t.createAt}),Object(n.jsx)("div",{style:{wordBreak:"break-all"},children:Object(n.jsx)(X.a,{source:t.desc})})]})}),Object(n.jsx)(N.a.Text,{children:Object(n.jsx)(D.a,{variant:"link",className:"btn-sm",onClick:function(){return l((function(e){return!e}))},children:o?"Hide Details":"View Details"})}),Object(n.jsx)(U.a,{in:o,children:Object(n.jsx)("div",{className:"mt-4",children:Object(n.jsx)(X.a,{children:t.requirement,allowDangerousHtml:!0})})})]})})})}function $(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/job"),t=Object(c.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=l(),S=w.fetchQuery,N=w.logout,L=Object(c.useRef)(),T=Object(c.useRef)(),F=Object(O.g)();function A(){return I.apply(this,arguments)}function I(){return(I=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",k(""),h(!0),a={query:"query {\n                jobs ".concat(t," { id, title, desc, requirement, type, minRate, maxRate, publishedFlag, closedFlag, createAt }\n            }")},S("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,N();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:s(t.body.data.jobs),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){e.preventDefault();var t="";"published"===T.current.value&&(t+=", published: true"),"closed"===T.current.value&&(t+=", closed: true"),A('(keyword: "'.concat(L.current.value,'" ').concat(t,")"))}function E(e){if(e.preventDefault(),window.confirm("Are you sure want to close this job?")){var t=e.target.dataset.id;console.log(t),V("close",t)}}function U(e){(e.preventDefault(),window.confirm("Are you sure want to publish this job?"))&&V("publish",e.target.dataset.id)}function V(t,a){h(!0),k(""),S("".concat(e,"/").concat(t,"/").concat(a),{},!0,"PUT").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,N();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:u(!d),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1)}return Object(c.useEffect)((function(){A()}),[d]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"/job"===window.location.pathname?"Jobs":"/qna"===window.location.pathname?"Question & Answer":"/applications"===window.location.pathname?"Job Applications":""}),Object(n.jsxs)("div",{className:"mt-4",children:[g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),"/job"===window.location.pathname&&Object(n.jsx)(R.b,{to:"/job/add",className:"btn btn-primary",children:"Add New Job"}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:G,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"5",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:L,onChange:G,disabled:p,placeholder:"Search by Name"})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsxs)(q.a.Control,{as:"select",ref:T,onChange:G,children:[Object(n.jsx)("option",{value:"",children:"All Status"}),Object(n.jsx)("option",{value:"closed",children:"Closed"}),Object(n.jsx)("option",{value:"published",children:"Published"})]})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:p,children:"Search"})})})]})}),r.length>0?r.map((function(e){return Object(n.jsx)(Z,{job:e,handleClose:E,handlePublish:U},e.id)})):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}var ee=a(135),te=a.n(ee);function ae(){var e="http://localhost:2000/api/job/",t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(""),S=Object(v.a)(w,2),N=S[0],L=S[1],T=Object(c.useState)(""),F=Object(v.a)(T,2),A=F[0],I=F[1],G=Object(c.useState)(),U=Object(v.a)(G,2),V=U[0],B=U[1],Q=Object(c.useState)(),M=Object(v.a)(Q,2),J=M[0],z=M[1],H=Object(c.useState)(""),W=Object(v.a)(H,2),_=W[0],Y=W[1],K=Object(c.useState)(),X=Object(v.a)(K,2),Z=X[0],$=X[1],ee=Object(c.useState)(),ae=Object(v.a)(ee,2),ne=ae[0],ce=ae[1],re=Object(c.useState)([]),se=Object(v.a)(re,2),ie=(se[0],se[1],Object(c.useRef)()),oe=Object(c.useRef)(),le=Object(c.useRef)(),de=Object(c.useRef)(),ue=Object(c.useRef)(),je=Object(c.useRef)(),be=Object(O.g)(),pe=l(),he=pe.fetchQuery,Oe=pe.logout;return Object(c.useEffect)((function(){if("edit"===r){k(""),u(!0);var e={query:'query {\n                    job (id: "'.concat(s,'") { id, title, desc, requirement, type, minRate, maxRate }\n                }')};he("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,Oe();case 4:be.push("/login");case 5:k(t.body.message),e.next=16;break;case 8:L(t.body.data.job.title),I(t.body.data.job.desc),Y(t.body.data.job.requirement),B("Full Time"===t.body.data.job.type),z("Part Time"===t.body.data.job.type),$(t.body.data.job.minRate),ce(t.body.data.job.maxRate),k("");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," Job"]}),g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsxs)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),u(!0),k("");var n=le.current.checked?"Full Time":"Part Time",c={title:ie.current.value,desc:oe.current.value,requirement:je.current.state.value,type:n,minRate:de.current.value,maxRate:ue.current.value};"edit"===r&&(e="".concat(e).concat(s),t="PUT"),he(e,c,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,Oe();case 4:be.push("/login");case 5:k(t.body.message),e.next=11;break;case 8:h(!p),k(""),be.push("/job");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)},children:[Object(n.jsxs)(E.a,{children:[Object(n.jsxs)(P.a,{md:"5",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Title"}),Object(n.jsx)(q.a.Control,{type:"text",ref:ie,defaultValue:N,autoFocus:!0,disabled:d,required:!0})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Description"}),Object(n.jsx)(q.a.Control,{as:"textarea",rows:3,ref:oe,defaultValue:A,disabled:d,required:!0})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Type"}),Object(n.jsx)("br",{}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"full",ref:le,defaultChecked:V}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"full",children:"Full Time"})]}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"part",defaultChecked:J}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"part",children:"Part Time"})]})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Minimum Rate"}),Object(n.jsx)(q.a.Control,{type:"number",ref:de,defaultValue:Z})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Maximum Rate"}),Object(n.jsx)(q.a.Control,{type:"number",ref:ue,defaultValue:ne})]})})]})]}),Object(n.jsx)(P.a,{md:"5",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Requirement"}),Object(n.jsx)("div",{id:"editor",children:Object(n.jsx)(te.a,{modules:{toolbar:[[{font:[]},{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"super"},{script:"sub"}],[{header:"1"},{header:"2"},"blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["direction",{align:[]}],["link","image","video","formula"],["clean"]]},ref:je,value:_})})]})})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:d,children:"Submit"}),!d&&Object(n.jsx)(R.b,{to:"/job",className:"btn btn-danger",disabled:d,children:"Cancel"})]})]})}function ne(e){var t=e.application,a=e.prevUrl,c=e.handleStatus,r=t.candidate,s=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[r.name," (",r.email,")","Registered"===r.status&&Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":r.id,"data-app":t.id,"data-status":"Interviewed",onClick:c,children:"Call Interview"}),"Interviewed"===r.status&&Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":r.id,"data-app":t.id,"data-status":"On Review",onClick:c,children:"On Review"}),"On Review"===r.status&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":r.id,"data-status":"Refuse","data-app":t.id,onClick:c,children:"Refuse"}),Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":r.id,"data-status":"Accept","data-app":t.id,onClick:c,children:"Accept"})]}),Object(n.jsx)(F.a,{variant:"success",style:{float:"right",cursor:"pointer"},"data-id":r.id,"data-app":t.id,onClick:function(e){var t=e.target.dataset.id,n=e.target.dataset.app;s.push("/candidate/detail/".concat(t,"?from=").concat(a,"&app=").concat(n))},children:"Detail"})]})})})}function ce(e){var t=e.currentJob;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(q.a,{className:"mt-4",children:Object(n.jsxs)(E.a,{children:[Object(n.jsxs)(P.a,{md:"5",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Title"}),Object(n.jsx)(q.a.Control,{type:"text",value:t.title,disabled:!0})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Description"}),Object(n.jsx)(q.a.Control,{as:"textarea",rows:3,value:t.desc,disabled:!0})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Type"}),Object(n.jsx)("br",{}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"full",checked:"Full Time"===t.type,disabled:!0}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"full",children:"Full Time"})]}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"part",checked:"Part Time"===t.type,disabled:!0}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"part",children:"Part Time"})]})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Minimum Rate"}),Object(n.jsx)(q.a.Control,{type:"number",value:t.minRate,disabled:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Maximum Rate"}),Object(n.jsx)(q.a.Control,{type:"number",value:t.maxRate,disabled:!0})]})})]})]}),Object(n.jsx)(P.a,{md:"5",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Requirement"}),Object(n.jsx)("div",{id:"editor",children:Object(n.jsx)(X.a,{children:t.requirement,allowDangerousHtml:!0})})]})})]})})})}function re(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/application/updatestatus"),t=Object(O.h)().idjob,a=Object(c.useState)(""),r=Object(v.a)(a,2),s=(r[0],r[1]),i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=(o[0],o[1]),u=Object(c.useState)({}),j=Object(v.a)(u,2),b=j[0],p=j[1],h=Object(c.useState)([]),m=Object(v.a)(h,2),x=m[0],g=m[1],k=Object(O.g)(),w=l(),S=w.fetchQuery,C=w.logout;function q(t){if(window.confirm("Are you sure want to update this job application?")){var a=t.target.dataset.status,n=t.target.dataset.app;d(!0),s(""),S("".concat(e,"/").concat(n),{status:a},!0,"PUT").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,C();case 4:k.push("/login");case 5:s(t.body.message),e.next=10;break;case 8:s(""),window.location.reload();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d(!1)}}return Object(c.useEffect)((function(){!function(){s(""),d(!1);var e={query:'query {\n                jobApplications (jobId: "'.concat(t,'"){ \n                    id, \n                    candidate { id, email, name, status } \n                },\n                job (id: "').concat(t,'") { title, desc, requirement, type, minRate, maxRate }\n            }')};S("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,C();case 4:k.push("/login");case 5:s(t.body.message),e.next=11;break;case 8:p(t.body.data.job),g(t.body.data.jobApplications),s("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d(!1)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{className:"mb-3",children:"Job Application"}),Object(n.jsxs)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[Object(n.jsx)("li",{className:"nav-item",role:"presentation",children:Object(n.jsx)("a",{className:"nav-link active",id:"applications-tab","data-toggle":"tab",href:"#applications",role:"tab","aria-controls":"applications","aria-selected":"true",children:"Applications"})}),Object(n.jsx)("li",{className:"nav-item",role:"presentation",children:Object(n.jsx)("a",{className:"nav-link",id:"detail-job-tab","data-toggle":"tab",href:"#detail-job",role:"tab","aria-controls":"detail-job","aria-selected":"false",children:"Detail Job"})})]}),Object(n.jsxs)("div",{className:"tab-content",id:"myTabContent",children:[Object(n.jsx)("div",{className:"tab-pane fade show active",id:"applications",role:"tabpanel","aria-labelledby":"applications-tab",children:x.length>0?Object(n.jsx)(N.a,{style:{width:"40em"},className:"mt-4",children:x.map((function(e){return Object(n.jsx)(ne,{application:e,prevUrl:window.location.pathname,handleStatus:q},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})}),Object(n.jsx)("div",{className:"tab-pane fade",id:"detail-job",role:"tabpanel","aria-labelledby":"detail-job-tab",children:Object(n.jsx)(ce,{currentJob:b},t)})]})]})}function se(e){var t=e.question,a=e.handleDelete,r=Object(O.g)(),s=Object(c.useState)(!1),i=Object(v.a)(s,2),o=i[0],l=i[1];return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[t.desc,Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,"data-idjob":t.jobId,onClick:a,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,"data-idjob":t.jobId,onClick:function(e){var t=e.target.dataset.id,a=e.target.dataset.idjob;r.push("/qna/".concat(a,"/edit/").concat(t))},children:"Edit"}),Object(n.jsx)(F.a,{variant:"secondary",style:{float:"right"},children:t.type}),Object(n.jsx)("br",{}),Object(n.jsxs)(D.a,{variant:"link",className:"btn-sm",onClick:function(){return l((function(e){return!e}))},children:[o?"Hide":"Show"," Options"]}),Object(n.jsx)(U.a,{in:o,children:Object(n.jsx)("ul",{children:t.options.length>0&&t.options.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)("p",{className:!0===e.value?"text-success":"text-danger",children:e.desc})})}))})})]})})})}function ie(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/question"),t=Object(c.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=l(),S=w.fetchQuery,L=w.logout,T=Object(c.useRef)(),F=Object(c.useRef)(),A=Object(O.g)(),I=Object(O.h)().idjob;function G(){return E.apply(this,arguments)}function E(){return(E=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",k(""),h(!0),a={query:"query {\n                questions ".concat(t," { id, jobId, job { title }, type, desc, weight, options { id, desc, value } }\n            }")},S("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,L();case 5:A.push("/login");case 6:k(t.body.message),e.next=11;break;case 9:s(t.body.data.questions),k("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){e.preventDefault();var t=""!==F.current.value?", type: ".concat(F.current.value):"";G('(keyword: "'.concat(T.current.value,'",jobId: "').concat(I,'" ').concat(t,")"))}function V(t){if(t.preventDefault(),window.confirm("Are you sure want to delete this data?")){var a=t.target.dataset.id;S("".concat(e,"/").concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:A.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:u(!d),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1)}}return Object(c.useEffect)((function(){G()}),[d]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Question & Answer"}),Object(n.jsxs)("div",{className:"mt-4",children:[g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(R.b,{to:"/qna/".concat(I,"/add"),className:"btn btn-primary",children:"Add New Question"}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:U,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"5",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:T,onChange:U,disabled:p,placeholder:"Search by Description or Weight"})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsxs)(q.a.Control,{as:"select",ref:F,onChange:U,children:[Object(n.jsx)("option",{value:"",children:"All Type"}),Object(n.jsx)("option",{value:"Single",children:"Single Answer"}),Object(n.jsx)("option",{value:"Multiple",children:"Multiple Answer"})]})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:p,children:"Search"})})})]})}),r.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h5",{className:"mt-4",children:["Job ",r[0].job.title]}),Object(n.jsx)(N.a,{className:"mt-3 col-md-8",children:r.map((function(e){if(e.id!==sessionStorage.getItem("id"))return Object(n.jsx)(se,{question:e,handleDelete:V},e.id)}))})]}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}var oe=a(15),le=a(77);function de(e){var t=e.id,a=e.option,c=e.handleDeleteOption;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(P.a,{md:"8",className:"list-option","data-index":t,children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Description"}),Object(n.jsx)(q.a.Control,{as:"textarea",row:"3",autoFocus:!0,required:!0,defaultValue:a.desc})]})}),Object(n.jsx)(P.a,{md:"4",className:"list-option","data-index":t,children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)("br",{}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"checkbox",name:"value",id:"correct_".concat(t),defaultChecked:a.value}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"correct_".concat(t),children:"Correct Answer"})]}),Object(n.jsx)(F.a,{variant:"danger",onClick:c,style:{cursor:"pointer"},"data-index":t,children:"Delete"})]})})]})}function ue(){var e="http://localhost:2000/api/question/",t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=a.idjob,o=Object(c.useState)(!1),d=Object(v.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)(!1),p=Object(v.a)(b,2),h=p[0],m=p[1],x=Object(c.useState)(""),g=Object(v.a)(x,2),k=g[0],w=g[1],S=Object(c.useState)([]),N=Object(v.a)(S,2),L=N[0],T=N[1],F=Object(c.useState)(""),A=Object(v.a)(F,2),I=A[0],G=A[1],U=Object(c.useState)(),V=Object(v.a)(U,2),B=V[0],Q=V[1],M=Object(c.useState)(),J=Object(v.a)(M,2),z=J[0],H=J[1],W=Object(c.useState)(),_=Object(v.a)(W,2),Y=_[0],K=_[1],X=Object(c.useRef)(),Z=Object(c.useRef)(),$=Object(c.useRef)(),ee=Object(O.g)(),te=l(),ae=te.fetchQuery,ne=te.logout;function ce(e){return re.apply(this,arguments)}function re(){return(re=Object(y.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.dataset.index,le.a.forEach(document.querySelectorAll('div.list-option[data-index="'.concat(a,'"]')),(function(e){e.remove()}),(function(e){e&&w(e.message),T((function(e){return e.filter((function(e,t){return t!=a}))}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){if("edit"===r){w(""),j(!0);var e={query:'query {\n                        question (id: "'.concat(s,'") { id, jobId, type, desc, weight, options { desc, value }\n                    }\n                }')};ae("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ne();case 4:ee.push("/login");case 5:w(t.body.message),e.next=14;break;case 8:w(""),K(t.body.data.question.weight),G(t.body.data.question.desc),Q("Single"===t.body.data.question.type),H("Multiple"===t.body.data.question.type),T(t.body.data.question.options);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," Question & Answer"]}),k&&Object(n.jsx)(C.a,{variant:"danger",children:k}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),j(!0),w("");var n=Z.current.checked?"Single":"Multiple",c=[];le.a.forEach(L,(function(e){var t=L.indexOf(e),a=document.querySelector('div.list-option.col-md-8[data-index="'.concat(t,'"')).childNodes[0].childNodes[1].value,n=document.querySelector('div.list-option.col-md-4[data-index="'.concat(t,'"')).childNodes[0].childNodes[1].childNodes[0].checked;c.push({desc:a,value:n})}));var o={jobId:i,type:n,desc:X.current.value,weight:$.current.value,createBy:sessionStorage.getItem("id"),updateBy:sessionStorage.getItem("id"),options:c};"edit"===r&&(e="".concat(e).concat(s),t="PUT"),ae(e,o,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ne();case 4:ee.push("/login");case 5:w(t.body.message),e.next=11;break;case 8:m(!h),w(""),ee.push("/qna/list/".concat(i));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!1)},children:Object(n.jsxs)(P.a,{md:"12",children:[Object(n.jsx)(E.a,{children:Object(n.jsxs)(P.a,{md:"8",children:[Object(n.jsx)("h5",{className:"mb-3",children:"Question"}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Description"}),Object(n.jsx)(q.a.Control,{as:"textarea",row:"3",ref:X,defaultValue:I,autoFocus:!0,disabled:u,required:!0})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Type"}),Object(n.jsx)("br",{}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"single",ref:Z,defaultChecked:B,disabled:u}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"single",children:"Single"})]}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"multiple",defaultChecked:z,disabled:u}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"multiple",children:"Multiple"})]})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Value"}),Object(n.jsx)(q.a.Control,{type:"number",ref:$,min:"0",max:"100",defaultValue:Y,disabled:u,required:!0})]})})]}),Object(n.jsx)("hr",{}),Object(n.jsx)("h5",{className:"mb-3",children:"Answers"}),Object(n.jsx)(D.a,{className:"mb-3",variant:"link",type:"button",onClick:function(){var e={desc:"",value:!1};T((function(t){return[].concat(Object(oe.a)(t),[e])}))},children:"Add Answer"}),Object(n.jsx)(q.a.Row,{id:"form-option",children:L.map((function(e,t){return Object(n.jsx)(de,{id:t,handleDeleteOption:ce,option:e},t)}))})]})}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:u,children:"Submit"}),!u&&Object(n.jsx)(R.b,{to:"/qna/list/".concat(i),className:"btn btn-danger",disabled:u,children:"Cancel"})]})})]})}function je(e){var t=e.candidate,a=(e.handleDelete,e.handleUpdateStatus,Object(O.g)());return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[t.name," (",t.email,")",Object(n.jsx)(F.a,{variant:"success",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;a.push("/candidate/detail/".concat(t))},children:"Detail"}),Object(n.jsx)(F.a,{variant:"secondary",className:"mr-2",style:{float:"right"},"data-id":t.id,children:t.status})]})})})}function be(){var e="http://localhost:2000/api/candidate",t=Object(c.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=l(),S=w.fetchQuery,R=w.logout,L=Object(c.useRef)(),T=Object(c.useRef)(),F=Object(O.g)();function A(){return I.apply(this,arguments)}function I(){return(I=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",k(""),h(!0),a={query:"query {\n                candidates ".concat(t," { id, email, name, status }\n            }")},S("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,R();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:s(t.body.data.candidates),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){e.preventDefault();var t=""!==T.current.value?", active: ".concat(T.current.value):"";A('(search: "'.concat(L.current.value,'"').concat(t,")"))}function E(t){if(t.preventDefault(),window.confirm("Are you sure want to delete this data?")){var a=t.target.dataset.id;S("".concat(e,"/").concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,R();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:u(!d),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1)}}function U(t){t.preventDefault();var a="true"===t.target.dataset.status?"block":"activate";if(window.confirm("Are you sure want to ".concat(a," this candidate?"))){h(!0),k("");var n=t.target.dataset.id;S("".concat(e,"/updatestatus/").concat(n),{},!0,"PUT").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,R();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:u(!d),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!1)}}return Object(c.useEffect)((function(){A()}),[d]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Candidate"}),Object(n.jsxs)("div",{className:"mt-4",children:[g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:G,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"5",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:L,onChange:G,disabled:p,placeholder:"Search by Identity Number, Email or Name"})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:p,children:"Search"})})})]})}),r.length>0?Object(n.jsx)(N.a,{style:{width:"40em"},className:"mt-4",children:r.map((function(e){if(e.id!==sessionStorage.getItem("id"))return Object(n.jsx)(je,{candidate:e,handleDelete:E,handleUpdateStatus:U},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}var pe=a(329);function he(e){var t=e.detailTest,a=e.no;return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{children:[a+1,". "]}),Object(n.jsx)("td",{children:t.question}),Object(n.jsx)("td",{children:t.answer}),Object(n.jsx)("td",{children:t.value})]})}function Oe(){var e=Object(O.h)(),t=e.type,a=e.id,r=Object(c.useState)(""),s=Object(v.a)(r,2),i=(s[0],s[1]),o=Object(c.useState)(!1),d=Object(v.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)({}),p=Object(v.a)(b,2),h=p[0],m=p[1],x=Object(c.useState)([]),g=Object(v.a)(x,2),k=g[0],w=g[1],S=Object(c.useState)(""),N=Object(v.a)(S,2),C=N[0],D=N[1],L=Object(O.g)(),T=l(),A=T.fetchQuery,I=T.logout;return Object(c.useEffect)((function(){!function(){i(""),j(!0);var e={query:'query {\n                candidate (id: "'.concat(a,'") {\n                    id,\n                    identityNumber,\n                    email,\n                    name,\n                    placeOfBirth,\n                    dateOfBirth,\n                    identityAddress,\n                    identitySubDistrict,\n                    identityDistricts,\n                    identityProvince,\n                    nationality,\n                    photo,\n                    cv,\n                    status    \n                }\n              }')};A("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,I();case 5:L.push("/login");case 6:i(t.body.message),e.next=11;break;case 9:i(""),m(t.body.data.candidate);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!1)}(),window.location.search?(!function(e){i(""),j(!0);var t={query:'query {\n                onlineTestDetail (id: "'.concat(e,'") {\n                    id,\n                    applicationId,\n                    questionId,\n                    question,\n                    answerId,\n                    answer,\n                    value\n                  }                \n              }')};A("https://mini-company-backend.herokuapp.com/graphql",t,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,I();case 4:L.push("/login");case 5:i(t.body.message),e.next=10;break;case 8:i(""),w(t.body.data.onlineTestDetail);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!1)}(window.location.search.split("=")[2]),D(window.location.search.split("&")[0].substring(6))):D("/candidate")}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[t.charAt(0).toUpperCase()+t.slice(1)," Candidate",h.status&&Object(n.jsx)(F.a,{variant:"Accepted"===h.status?"success":"Refused"===h.status?"danger":"secondary",className:"ml-5",children:h.status})]}),Object(n.jsxs)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[Object(n.jsx)("li",{className:"nav-item",role:"presentation",children:Object(n.jsx)("a",{className:"nav-link active",id:"applications-tab","data-toggle":"tab",href:"#applications",role:"tab","aria-controls":"applications","aria-selected":"true",children:"General Information"})}),Object(n.jsx)("li",{className:"nav-item",role:"presentation",children:Object(n.jsx)("a",{className:"nav-link",id:"detail-job-tab","data-toggle":"tab",href:"#detail-job",role:"tab","aria-controls":"detail-job","aria-selected":"false",children:"Detail Online Test"})})]}),Object(n.jsxs)("div",{className:"tab-content",id:"myTabContent",children:[Object(n.jsx)("div",{className:"tab-pane fade show active",id:"applications",role:"tabpanel","aria-labelledby":"applications-tab",children:Object(n.jsxs)(E.a,{children:[Object(n.jsx)(P.a,{md:"5",children:Object(n.jsxs)(q.a,{className:"mt-4",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Identity Number"}),Object(n.jsx)(q.a.Control,{type:"text",defaultValue:h.identityNumber?h.identityNumber:"",autoFocus:!0,disabled:!u,required:!0})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Name"}),Object(n.jsx)(q.a.Control,{type:"text",defaultValue:h.name?h.name:"",disabled:!u,required:!0})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Email"}),Object(n.jsx)(q.a.Control,{type:"email",defaultValue:h.email?h.email:"",disabled:!u,required:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Nationality"}),Object(n.jsx)("br",{}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"citizen",defaultChecked:h.nationality&&"WNI"===h.nationality,disabled:!u}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"citizen",children:"Citizen"})]}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"foreigner",defaultChecked:h.nationality&&"WNA"===h.nationality,disabled:!u}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"foreigner",children:"Foreigner"})]})]})})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Place of Birth"}),Object(n.jsx)(q.a.Control,{type:"text",defaultValue:h.placeOfBirth?h.placeOfBirth:"",disabled:!u,required:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Date of Birth"}),Object(n.jsx)(q.a.Control,{type:"date",defaultValue:h.dateOfBirth?h.dateOfBirth:"",disabled:!u,required:!0})]})})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Identity Address"}),Object(n.jsx)(q.a.Control,{as:"textarea",defaultValue:h.identityAddress?h.identityAddress:"",disabled:!u,required:!0})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Subdistrict"}),Object(n.jsx)(q.a.Control,{type:"text",defaultValue:h.identitySubDistrict?h.identitySubDistrict:"",disabled:!u})]})}),Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"District"}),Object(n.jsx)(q.a.Control,{type:"text",defaultValue:h.identityDistricts?h.identityDistricts:"",disabled:!u})]})}),Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Province"}),Object(n.jsx)(q.a.Control,{type:"text",defaultValue:h.identityProvince?h.identityProvince:"",disabled:!u})]})})]})]})}),Object(n.jsxs)(P.a,{md:"5",children:[Object(n.jsx)(pe.a,{src:"../../logo512.png",className:"rounded",alt:"..."}),Object(n.jsx)("br",{}),Object(n.jsxs)("a",{href:h.cv&&null!==h.cv?h.cv:"#",download:h.cv&&null!==h.cv?"CV ".concat(h.name):null,children:[Object(n.jsx)("i",{className:"fa fa-download fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Curriculum Vitae"})]})]})]})}),Object(n.jsx)("div",{className:"tab-pane fade",id:"detail-job",role:"tabpanel","aria-labelledby":"detail-job-tab",children:k.length>0?Object(n.jsxs)("table",{className:"table table-hover",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{style:{width:"3em"},children:"No."}),Object(n.jsx)("td",{children:"Question"}),Object(n.jsx)("td",{children:"Answer"}),Object(n.jsx)("td",{style:{width:"5em"},children:"Score"})]})}),Object(n.jsx)("tbody",{children:k.map((function(e,t){return Object(n.jsx)(he,{detailTest:e,no:t},e.id)}))}),Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{colSpan:"3",children:Object(n.jsx)("strong",{children:"Total Score"})}),Object(n.jsx)("td",{children:Object(n.jsx)("strong",{children:k.reduce((function(e,t){return e+t.value}),0)})})]})})]}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})})]}),Object(n.jsx)(R.b,{to:C,className:"btn btn-danger",disabled:!u,children:"Back"})]})}function me(e){var t=e.division,a=e.handleDelete,c=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[t.name,Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:a,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;c.push("/division/edit/".concat(t))},children:"Edit"})]})})})}function xe(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/division"),t=Object(c.useRef)(),a=Object(c.useState)(!1),r=Object(v.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(""),d=Object(v.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)([]),p=Object(v.a)(b,2),h=p[0],m=p[1],x=l(),g=x.fetchQuery,k=x.logout,w=Object(O.g)();function S(e){e.preventDefault(),T('(keyword: "'.concat(t.current.value,'")'))}function L(t){if(t.preventDefault(),i(!0),j(""),window.confirm("Are you sure want to delete this data?")){var a=t.target.dataset.id;g("".concat(e,"/").concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,k();case 4:w.push("/login");case 5:j(t.body.message),e.next=10;break;case 8:window.location.reload(),j("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i(!1)}else i(!1)}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(!0),j("");var t={query:"query { divisions ".concat(e," { id, name } }")};g("https://mini-company-backend.herokuapp.com/graphql",t,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,k();case 4:w.push("/login");case 5:j(t.body.message),e.next=10;break;case 8:m(t.body.data.divisions),j("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i(!1)}return Object(c.useEffect)((function(){T()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Division"}),Object(n.jsxs)("div",{className:"mt-4",children:[u&&Object(n.jsx)(C.a,{variant:"danger",children:u}),Object(n.jsx)(R.b,{to:"/division/add",className:"btn btn-primary",children:"Add New Division"}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:S,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"5",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:t,onChange:S,disabled:s,placeholder:"Search by Name"})})}),Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:s,children:"Search"})})]})}),h.length>0?Object(n.jsx)(N.a,{style:{width:"30em"},className:"mt-4",children:h.map((function(e){return Object(n.jsx)(me,{division:e,handleDelete:L},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function fe(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/division/"),t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(""),S=Object(v.a)(w,2),N=S[0],L=S[1],T=Object(c.useRef)(),F=Object(O.g)(),A=l(),I=A.fetchQuery,G=A.logout;return Object(c.useEffect)((function(){if("edit"===r){k(""),u(!0);var e={query:'query {\n                    division (id: "'.concat(s,'") { id, name }\n                }')};I("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,G();case 4:F.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:L(t.body.data.division.name),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," Division"]}),g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),u(!0),k("");var n={name:T.current.value};"edit"===r&&(e="".concat(e).concat(s),t="PUT"),I(e,n,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,G();case 4:F.push("/login");case 5:k(t.body.message),e.next=11;break;case 8:h(!p),k(""),F.push("/division");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)},children:Object(n.jsxs)(P.a,{md:"5",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Name"}),Object(n.jsx)(q.a.Control,{type:"text",ref:T,defaultValue:N,autoFocus:!0,disabled:d,required:!0})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:d,children:"Submit"}),!d&&Object(n.jsx)(R.b,{to:"/division",className:"btn btn-danger",disabled:d,children:"Cancel"})]})})]})}function ye(e){var t=e.department,a=e.handleDelete,c=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[t.name,Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:a,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;c.push("/department/edit/".concat(t))},children:"Edit"})]})})})}function ve(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/department"),t=Object(c.useRef)(),a=Object(c.useState)(!1),r=Object(v.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(""),d=Object(v.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)([]),p=Object(v.a)(b,2),h=p[0],m=p[1],x=l(),g=x.fetchQuery,k=x.logout,w=Object(O.g)();function S(e){e.preventDefault(),T('(keyword: "'.concat(t.current.value,'")'))}function L(t){if(t.preventDefault(),i(!0),j(""),window.confirm("Are you sure want to delete this data?")){var a=t.target.dataset.id;g("".concat(e,"/").concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,k();case 4:w.push("/login");case 5:j(t.body.message),e.next=10;break;case 8:window.location.reload(),j("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i(!1)}else i(!1)}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(!0),j("");var t={query:"query { departments ".concat(e," { id, name } }")};g("https://mini-company-backend.herokuapp.com/graphql",t,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,k();case 4:w.push("/login");case 5:j(t.body.message),e.next=10;break;case 8:m(t.body.data.departments),j("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i(!1)}return Object(c.useEffect)((function(){T()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Department"}),Object(n.jsxs)("div",{className:"mt-4",children:[u&&Object(n.jsx)(C.a,{variant:"danger",children:u}),Object(n.jsx)(R.b,{to:"/department/add",className:"btn btn-primary",children:"Add New Department"}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:S,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"5",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:t,onChange:S,disabled:s,placeholder:"Search by Name"})})}),Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:s,children:"Search"})})]})}),h.length>0?Object(n.jsx)(N.a,{style:{width:"30em"},className:"mt-4",children:h.map((function(e){return Object(n.jsx)(ye,{department:e,handleDelete:L},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function ge(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/department/"),t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(""),S=Object(v.a)(w,2),N=S[0],L=S[1],T=Object(c.useRef)(),F=Object(O.g)(),A=l(),I=A.fetchQuery,G=A.logout;return Object(c.useEffect)((function(){if("edit"===r){k(""),u(!0);var e={query:'query {\n                    department (id: "'.concat(s,'") { id, name }\n                }')};I("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,G();case 5:F.push("/login");case 6:k(t.body.message),e.next=11;break;case 9:L(t.body.data.department.name),k("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," Division"]}),g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),u(!0),k("");var n={name:T.current.value};"edit"===r&&(e="".concat(e).concat(s),t="PUT"),I(e,n,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,G();case 4:F.push("/login");case 5:k(t.body.message),e.next=11;break;case 8:h(!p),k(""),F.push("/department");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)},children:Object(n.jsxs)(P.a,{md:"5",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Name"}),Object(n.jsx)(q.a.Control,{type:"text",ref:T,defaultValue:N,autoFocus:!0,disabled:d,required:!0})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:d,children:"Submit"}),!d&&Object(n.jsx)(R.b,{to:"/department",className:"btn btn-danger",disabled:d,children:"Cancel"})]})})]})}var ke=a(330);function we(e){var t=e.show,a=e.handleClose,r=e.id,s="http://localhost:2100/api/employee/resign/".concat(r),i=Object(c.useRef)(),o=Object(O.g)(),d=l(),u=d.fetchQuery,j=d.logout;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(ke.a,{size:"md",show:t,onHide:a,children:[Object(n.jsx)(ke.a.Header,{closeButton:!0,children:Object(n.jsx)(ke.a.Title,{children:"Detail Resign"})}),Object(n.jsx)(ke.a.Body,{children:Object(n.jsxs)(q.a,{onSubmit:function(e){e.preventDefault(),u(s,{resignDate:i.current.value},!0,"PUT").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,j();case 4:o.push("/login");case 5:alert(t.body.message),e.next=9;break;case 8:window.location.reload();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Resign Date"}),Object(n.jsx)(q.a.Control,{type:"date",ref:i,required:!0})]}),Object(n.jsx)(D.a,{variant:"primary",type:"submit",children:"Save"})]})})]})})}function Se(e){var t=e.employee,a=(e.handleDelete,e.handleUpdateStatus),r=Object(c.useState)(!1),s=Object(v.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)("Resign"),d=Object(v.a)(l,2),u=d[0],j=(d[1],Object(O.g)());return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[t.division," - ",t.name," ",Object(n.jsxs)("strong",{children:["(",t.employeeId,")"]}),Object(n.jsx)(F.a,{variant:t.activeFlag?"secondary":"success",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:a,children:t.activeFlag?"Disable":"Activate"}),Object(n.jsx)(F.a,{variant:"success",className:"mr-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;j.push("/employee/detail/".concat(t))},children:"Detail"}),!t.resignDate&&Object(n.jsx)(F.a,{variant:"danger",className:"mr-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(){return o(!0)},children:"Resign"}),Object(n.jsx)(F.a,{variant:"primary",className:"mr-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;j.push("/employee/edit/".concat(t))},children:"Edit"})]})}),Object(n.jsx)(we,{show:i,handleClose:function(){return o(!1)},id:t.id,type:u})]})}function Ne(){var e="http://localhost:2100/api/employee",t=Object(c.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)([]),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)([]),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(!1),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(!1),S=Object(v.a)(w,2),L=S[0],T=S[1],F=Object(c.useState)(""),A=Object(v.a)(F,2),I=A[0],G=A[1],E=l(),U=E.fetchQuery,V=E.logout,B=Object(c.useRef)(),Q=Object(c.useRef)(),M=Object(c.useRef)(),J=Object(O.g)();function z(){return H.apply(this,arguments)}function H(){return(H=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",G(""),T(!0),a={query:"query {\n                employees ".concat(t," { id, employeeId, email, name, status, jobTitle, activeFlag, division, department, resignDate },\n                divisions { id, name },\n                departments { id, name }\n            }")},U("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,V();case 4:J.push("/login");case 5:G(t.body.message),e.next=12;break;case 8:u(t.body.data.divisions),h(t.body.data.departments),s(t.body.data.employees),G("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){e.preventDefault();var t=""!==Q.current.value?', division: "'.concat(Q.current.value,'"'):"",a=""!==M.current.value?', department: "'.concat(M.current.value,'"'):"";z('(keyword: "'.concat(B.current.value,'"').concat(t).concat(a,")"))}function _(t){if(t.preventDefault(),window.confirm("Are you sure want to delete this data?")){var a=t.target.dataset.id;U("".concat(e,"/").concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,V();case 4:J.push("/login");case 5:G(t.body.message),e.next=10;break;case 8:k(!g),G("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(!1)}}function Y(t){t.preventDefault();var a="true"===t.target.dataset.status?"block":"activate";if(window.confirm("Are you sure want to ".concat(a," this candidate?"))){T(!0),G("");var n=t.target.dataset.id;U("".concat(e,"/updatestatus/").concat(n),{},!0,"PUT").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,V();case 4:J.push("/login");case 5:G(t.body.message),e.next=10;break;case 8:k(!g),G("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T(!1)}}return Object(c.useEffect)((function(){z()}),[g]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Employee"}),Object(n.jsxs)("div",{className:"mt-4",children:[I&&Object(n.jsx)(C.a,{variant:"danger",children:I}),Object(n.jsx)(R.b,{className:"btn btn-primary",to:"/employee/add",children:"Add New Employee"}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:W,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"4",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:B,onChange:W,disabled:L,placeholder:"Search by Employee ID, Email or Name"})})}),Object(n.jsx)(P.a,{md:"3",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsxs)(q.a.Control,{as:"select",ref:Q,onChange:W,children:[Object(n.jsx)("option",{value:"",children:"All Division"}),d.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name})}))]})})}),Object(n.jsx)(P.a,{md:"3",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsxs)(q.a.Control,{as:"select",ref:M,onChange:W,children:[Object(n.jsx)("option",{value:"",children:"All Department"}),p.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name})}))]})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:L,children:"Search"})})})]})}),r.length>0?Object(n.jsx)(N.a,{style:{width:"70em"},className:"mt-4",children:r.map((function(e){if(e.id!==sessionStorage.getItem("id"))return Object(n.jsx)(Se,{employee:e,handleDelete:_,handleUpdateStatus:Y},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function Ce(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/employee/"),t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(""),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)([]),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)([]),S=Object(v.a)(w,2),N=S[0],L=S[1],T=Object(c.useState)([]),A=Object(v.a)(T,2),I=A[0],G=A[1],U=Object(c.useState)({}),V=Object(v.a)(U,2),B=V[0],Q=V[1],M=Object(c.useState)(""),J=Object(v.a)(M,2),z=J[0],H=J[1],W=Object(c.useState)(""),_=Object(v.a)(W,2),Y=_[0],K=_[1],X=Object(c.useState)(""),Z=Object(v.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)(""),ae=Object(v.a)(te,2),ne=ae[0],ce=ae[1],re=l(),se=re.fetchQuery,ie=re.logout,oe=Object(O.g)(),le=Object(c.useRef)(),de=Object(c.useRef)(),ue=Object(c.useRef)(),je=Object(c.useRef)(),be=Object(c.useRef)(),pe=Object(c.useRef)(),he=Object(c.useRef)(),Oe=Object(c.useRef)(),me=Object(c.useRef)(),xe=Object(c.useRef)(),fe=Object(c.useRef)(),ye=Object(c.useRef)(),ve=Object(c.useRef)(),ge=Object(c.useRef)(),ke=Object(c.useRef)(),we=Object(c.useRef)(),Se=Object(c.useRef)(),Ne=Object(c.useRef)(),Ce=Object(c.useRef)();function qe(){return(qe=Object(y.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(""),u(!0),se("https://mini-company-backend.herokuapp.com/graphql",{query:"query {\n                divisions { id, name },\n                departments { id, name }\n            }"},!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ie();case 4:oe.push("/login");case 5:h(t.body.message),e.next=11;break;case 8:k(t.body.data.divisions),L(t.body.data.departments),h("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return Re.apply(this,arguments)}function Re(){return(Re=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",h(""),u(!0),a={query:"query {\n                usersForEmployee ".concat(t," { id, username, name, email, role, activeFlag }\n            }")},se("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ie();case 4:oe.push("/login");case 5:h(t.body.message),e.next=10;break;case 8:G(t.body.data.usersForEmployee),h("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u("detail"===r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){qe.apply(this,arguments)}(),De(),"add"!==r&&function(){h(""),u(!0);var e={query:'query {\n                employee (id: "'.concat(s,'") { id, employeeId, name, nationality, identityNumber, email, placeOfBirth, dateOfBirth, identityAddress, identitySubDistrict, identityDistricts, identityProvince, phoneNumber, accountBank, joinDate, status, jobTitle, division, department, usernameEmployee }\n            }')};se("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,ie();case 5:oe.push("/login");case 6:h(t.body.message),e.next=16;break;case 9:Q(t.body.data.employee),ee(t.body.data.employee.status),H(t.body.data.employee.division),K(t.body.data.employee.department),ce(t.body.data.employee.usernameEmployee),De('(employeeId: "'.concat(t.body.data.employee.id,'")')),h("");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," Employee"]}),"detail"===r&&Object(n.jsxs)("div",{children:[Object(n.jsx)(F.a,{variant:"primary",style:{cursor:"pointer"},"data-id":B.id,onClick:function(e){var t=e.target.dataset.id;oe.push("/contract/".concat(t))},children:"Contract"}),Object(n.jsx)(F.a,{variant:"primary",className:"ml-2","data-id":B.id,style:{cursor:"pointer"},onClick:function(e){var t=e.target.dataset.id;oe.push("/salary/".concat(t))},children:"Salary"}),Object(n.jsx)(F.a,{variant:"danger",className:"ml-2","data-id":B.id,style:{cursor:"pointer"},onClick:function(){oe.push("/employee")},children:"Back"}),Object(n.jsx)("br",{})]}),p&&Object(n.jsx)(C.a,{variant:"danger",children:p}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),h(""),u(!0);var n=de.current.checked?"Citizen":"Foreign Nationals",c={identityNumber:je.current.value,email:be.current.value,name:le.current.value,placeOfBirth:pe.current.value,dateOfBirth:he.current.value,nationality:n,division:Se.current.value,department:Ne.current.value,accountBank:ve.current.value,jobTitle:we.current.value,joinDate:ge.current.value,status:ke.current.value,user:Ce.current.value};""!==Oe.current.value&&(c.identityAddress=Oe.current.value),""!==me.current.value&&(c.identitySubDistrict=me.current.value),""!==xe.current.value&&(c.identityDistrict=xe.current.value),""!==fe.current.value&&(c.identityProvince=fe.current.value),""!==ye.current.value&&(c.phoneNumber=ye.current.value),"edit"===r&&(e="".concat(e).concat(s),t="PUT"),se(e,c,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ie();case 4:oe.push("/login");case 5:h(t.body.message),e.next=9;break;case 8:se("".concat("https://mini-company-backend.herokuapp.com/api","/user/update-employee/").concat(Ce.current.value),{employeeId:t.body._id},!0,"PUT").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ie();case 4:oe.push("/login");case 5:h(t.body.message),e.next=10;break;case 8:h(""),oe.push("/employee");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)},children:Object(n.jsxs)(P.a,{md:"8",children:[Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Name"}),Object(n.jsx)(q.a.Control,{type:"text",ref:le,autoFocus:!0,disabled:d,defaultValue:Object.keys(B).length>0?B.name:"",required:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"User Employee"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:Ce,disabled:d,value:ne,required:!0,onChange:function(e){return ce(e.target.value)},children:[Object(n.jsx)("option",{value:"",hidden:!0,children:"Select User"}),I.map((function(e){return Object(n.jsxs)("option",{value:e.username,children:[e.username," - (",e.role,")"]})}))]})]})})]}),Object(n.jsxs)(q.a.Group,{as:E.a,children:[Object(n.jsx)(q.a.Label,{column:!0,md:"3",children:"Nationality"}),Object(n.jsx)("br",{}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",className:"mr-4",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"citizen",ref:de,disabled:d,defaultChecked:!(Object.keys(B).length>0)||"Citizen"===B.nationality}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"citizen",children:"Citizen"})]}),Object(n.jsxs)(q.a.Check,{inline:!0,type:"radio",children:[Object(n.jsx)(q.a.Check.Input,{type:"radio",name:"type",id:"foreign",ref:ue,disabled:d,defaultChecked:Object.keys(B).length>0&&"Foreign Nationals"===B.nationality}),Object(n.jsx)(q.a.Check.Label,{htmlFor:"foreign",children:"Foreign Nationals"})]})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Identity Number"}),Object(n.jsx)(q.a.Control,{type:"text",ref:je,disabled:d,defaultValue:Object.keys(B).length>0?B.identityNumber:"",required:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Email"}),Object(n.jsx)(q.a.Control,{type:"email",ref:be,disabled:d,defaultValue:Object.keys(B).length>0?B.email:"",required:!0})]})})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Place of Birth"}),Object(n.jsx)(q.a.Control,{type:"text",ref:pe,disabled:d,defaultValue:Object.keys(B).length>0?B.placeOfBirth:"",required:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Date of Birth"}),Object(n.jsx)(q.a.Control,{type:"date",ref:he,disabled:d,defaultValue:Object.keys(B).length>0?B.dateOfBirth:"",required:!0})]})})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Identity Address"}),Object(n.jsx)(q.a.Control,{as:"textarea",ref:Oe,disabled:d,defaultValue:Object.keys(B).length>0?B.identityAddress:""})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Identity Sub-District"}),Object(n.jsx)(q.a.Control,{type:"text",ref:me,disabled:d,defaultValue:Object.keys(B).length>0?B.identitySubDistrict:""})]})}),Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Identity District"}),Object(n.jsx)(q.a.Control,{type:"text",ref:xe,disabled:d,defaultValue:Object.keys(B).length>0?B.identityDistrict:""})]})}),Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Identity Province"}),Object(n.jsx)(q.a.Control,{type:"text",ref:fe,disabled:d,defaultValue:Object.keys(B).length>0?B.identityProvince:""})]})})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Phone Number"}),Object(n.jsx)(q.a.Control,{type:"text",ref:ye,disabled:d,defaultValue:Object.keys(B).length>0?B.phoneNumber:""})]})}),Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Account Bank"}),Object(n.jsx)(q.a.Control,{type:"text",ref:ve,disabled:d,defaultValue:Object.keys(B).length>0?B.accountBank:"",required:!0})]})}),Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Join Date"}),Object(n.jsx)(q.a.Control,{type:"date",ref:ge,disabled:d,defaultValue:Object.keys(B).length>0?B.joinDate:"",required:!0})]})})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Employment Status"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:ke,disabled:d,value:$,onChange:function(e){return ee(e.target.value)},required:!0,children:[Object(n.jsx)("option",{value:"Contract",children:"Contract"}),Object(n.jsx)("option",{value:"Permanent",children:"Permanent"})]})]})}),Object(n.jsx)(P.a,{md:"8",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Job Title"}),Object(n.jsx)(q.a.Control,{type:"text",ref:we,disabled:d,defaultValue:Object.keys(B).length>0?B.jobTitle:"",required:!0})]})})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Division"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:Se,disabled:d,value:z,required:!0,onChange:function(e){return H(e.target.value)},children:[Object(n.jsx)("option",{value:"",hidden:!0,children:"Select Division"}),g.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name})}))]})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Department"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:Ne,disabled:d,value:Y,required:!0,onChange:function(e){return K(e.target.value)},children:[Object(n.jsx)("option",{value:"",hidden:!0,children:"Select Department"}),N.map((function(e){return Object(n.jsx)("option",{value:e.name,children:e.name})}))]})]})})]}),"detail"!==r&&Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:d,children:"Submit"}),!d&&Object(n.jsx)(R.b,{to:"/employee",className:"btn btn-danger",disabled:d,children:"Cancel"})]})})]})}function qe(e){var t=e.contract,a=e.statusEmployee,c=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[Object(n.jsx)("b",{children:"From :"})," ",t.dateFrom," ",Object(n.jsx)("b",{children:"Until :"})," ",t.dateUntil,"Permanent"!==a&&Object(n.jsx)(F.a,{variant:"primary",className:"mr-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var a=e.target.dataset.id;c.push("/contract/".concat(t.employee.id,"/edit/").concat(a))},children:"Edit"}),Object(n.jsx)(F.a,{variant:"success",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var a=e.target.dataset.id;c.push("/contract/".concat(t.employee.id,"/show/").concat(a))},children:"Show"})]})})})}function De(){var e=Object(O.h)().idemployee,t=("".concat("https://mini-company-backend.herokuapp.com/api","/division"),Object(c.useState)(!1)),a=Object(v.a)(t,2),r=(a[0],a[1]),s=Object(c.useState)(""),i=Object(v.a)(s,2),o=i[0],d=i[1],u=Object(c.useState)([]),j=Object(v.a)(u,2),b=j[0],p=j[1],h=Object(c.useState)({}),m=Object(v.a)(h,2),x=m[0],g=m[1],k=l(),w=k.fetchQuery,S=k.logout,q=Object(O.g)();return Object(c.useEffect)((function(){!function(){r(!0),d("");var t={query:'query { employeeContracts (id: "'.concat(e,'") { id, employee { id, employeeId, name }, dateFrom, dateUntil, activeFlag } }')};console.log(t),w("https://mini-company-backend.herokuapp.com/graphql",t,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,S();case 5:q.push("/login");case 6:d(t.body.message),e.next=11;break;case 9:p(t.body.data.employeeContracts),d("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r(!1)}(),function(){d(""),r(!0);var t={query:'query {\n                employee (id: "'.concat(e,'") { id, employeeId, name, status }\n            }')};w("https://mini-company-backend.herokuapp.com/graphql",t,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,S();case 4:q.push("/login");case 5:d(t.body.message),e.next=10;break;case 8:g(t.body.data.employee),d("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r(!1)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:["Contract ",x.name]}),Object(n.jsxs)("div",{className:"mt-4",children:[o&&Object(n.jsx)(C.a,{variant:"danger",children:o}),"Permanent"!==x.status&&Object(n.jsx)(R.b,{to:"/contract/".concat(e,"/add"),className:"btn btn-primary",children:"Add New Contract"}),Object(n.jsx)(R.b,{to:"/employee/detail/".concat(e),className:"btn btn-danger ml-2",children:"Back"}),b.length>0?Object(n.jsx)(N.a,{style:{width:"30em"},className:"mt-4",children:b.map((function(e){return Object(n.jsx)(qe,{contract:e,statusEmployee:x.status},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function Re(){var e=Object(O.h)(),t=e.type,a=e.id,r=e.idemployee,s="".concat("https://mini-company-backend.herokuapp.com/api","/employee/contract/"),i="POST",o=Object(c.useState)(!1),d=Object(v.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)(!1),p=Object(v.a)(b,2),h=p[0],m=p[1],x=Object(c.useState)(""),g=Object(v.a)(x,2),k=g[0],w=g[1],S=Object(c.useState)(""),N=Object(v.a)(S,2),L=N[0],T=N[1],F=Object(c.useState)(""),A=Object(v.a)(F,2),I=A[0],G=A[1],E=(Object(c.useRef)(),Object(c.useRef)()),U=Object(c.useRef)(),V=Object(O.g)(),B=l(),Q=B.fetchQuery,M=B.logout;return Object(c.useEffect)((function(){if("edit"===t){w(""),j(!0);var e={query:'query {\n                    employeeContract (id: "'.concat(a,'") { id, dateFrom, dateUntil }\n                }')};Q("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,M();case 4:V.push("/login");case 5:w(t.body.message),e.next=11;break;case 8:T(t.body.data.employeeContract.dateFrom),G(t.body.data.employeeContract.dateUntil),w("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[t.charAt(0).toUpperCase()+t.slice(1)," Contract"]}),k&&Object(n.jsx)(C.a,{variant:"danger",children:k}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(e){e.preventDefault(),j(!0),w("");var n={dateFrom:E.current.value,dateUntil:U.current.value,createBy:sessionStorage.getItem("id"),updateBy:sessionStorage.getItem("id")};s="edit"===t?"".concat(s).concat(a):"".concat(s).concat(r),"edit"===t&&(i="PUT"),Q(s,n,!0,i).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,M();case 4:V.push("/login");case 5:w(t.body.message),e.next=11;break;case 8:m(!h),w(""),V.push("/contract/".concat(r));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!1)},children:Object(n.jsxs)(P.a,{md:"5",children:[Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Date From"}),Object(n.jsx)(q.a.Control,{type:"date",ref:E,disabled:u,defaultValue:L,required:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Date Until"}),Object(n.jsx)(q.a.Control,{type:"date",ref:U,disabled:u,defaultValue:I,required:!0})]})})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:u,children:"Submit"}),!u&&Object(n.jsx)(R.b,{to:"/contract/".concat(r),className:"btn btn-danger",disabled:u,children:"Cancel"})]})})]})}function Le(e){var t=e.salary,a=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[Object(n.jsx)("b",{children:t.createAt})," as ",t.job," - Rp. ",t.amount.toLocaleString(),Object(n.jsx)(F.a,{variant:"primary",className:"mr-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var n=e.target.dataset.id;a.push("/salary/".concat(t.employee.id,"/edit/").concat(n))},children:"Edit"})]})})})}function Pe(){var e=Object(O.h)().idemployee,t=("".concat("https://mini-company-backend.herokuapp.com/api","/division"),Object(c.useState)(!1)),a=Object(v.a)(t,2),r=(a[0],a[1]),s=Object(c.useState)(""),i=Object(v.a)(s,2),o=i[0],d=i[1],u=Object(c.useState)([]),j=Object(v.a)(u,2),b=j[0],p=j[1],h=Object(c.useState)({}),m=Object(v.a)(h,2),x=m[0],g=m[1],k=l(),w=k.fetchQuery,S=k.logout,q=Object(O.g)();return Object(c.useEffect)((function(){!function(){r(!0),d("");var t={query:'query { employeeSalaries (id: "'.concat(e,'") { id, employee { id, employeeId, name }, job, division, department, amount, activeFlag, createAt } }')};w("https://mini-company-backend.herokuapp.com/graphql",t,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,S();case 4:q.push("/login");case 5:d(t.body.message),e.next=10;break;case 8:p(t.body.data.employeeSalaries),d("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r(!1)}(),function(){d(""),r(!0);var t={query:'query {\n                employee (id: "'.concat(e,'") { id, employeeId, name }\n            }')};w("https://mini-company-backend.herokuapp.com/graphql",t,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,S();case 4:q.push("/login");case 5:d(t.body.message),e.next=10;break;case 8:g(t.body.data.employee),d("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r(!1)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:["Salary ",x.name]}),Object(n.jsxs)("div",{className:"mt-4",children:[o&&Object(n.jsx)(C.a,{variant:"danger",children:o}),Object(n.jsx)(R.b,{to:"/salary/".concat(e,"/add"),className:"btn btn-primary",children:"Add New Salary"}),Object(n.jsx)(R.b,{to:"/employee/detail/".concat(e),className:"btn btn-danger ml-2",children:"Back"}),b.length>0?Object(n.jsx)(N.a,{style:{width:"30em"},className:"mt-4",children:b.map((function(e){return Object(n.jsx)(Le,{salary:e},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function Te(){var e=Object(O.h)(),t=e.type,a=e.id,r=e.idemployee,s="".concat("https://mini-company-backend.herokuapp.com/api","/employee/salary/"),i="POST",o=Object(c.useState)(!1),d=Object(v.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)(!1),p=Object(v.a)(b,2),h=p[0],m=p[1],x=Object(c.useState)(""),g=Object(v.a)(x,2),k=g[0],w=g[1],S=Object(c.useState)(),N=Object(v.a)(S,2),L=N[0],T=N[1],F=Object(c.useRef)(),A=Object(O.g)(),I=l(),G=I.fetchQuery,E=I.logout;return Object(c.useEffect)((function(){if("edit"===t){w(""),j(!0);var e={query:'query {\n                    employeeSalary (id: "'.concat(a,'") { id, amount }\n                }')};G("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,E();case 4:A.push("/login");case 5:w(t.body.message),e.next=10;break;case 8:T(t.body.data.employeeSalary.amount),w("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[t.charAt(0).toUpperCase()+t.slice(1)," Salary"]}),k&&Object(n.jsx)(C.a,{variant:"danger",children:k}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(e){e.preventDefault(),j(!0),w("");var n={amount:F.current.value,createBy:sessionStorage.getItem("id"),updateBy:sessionStorage.getItem("id")};s="edit"===t?"".concat(s).concat(a):"".concat(s).concat(r),"edit"===t&&(i="PUT"),G(s,n,!0,i).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,E();case 4:A.push("/login");case 5:w(t.body.message),e.next=11;break;case 8:m(!h),w(""),A.push("/salary/".concat(r));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!1)},children:Object(n.jsxs)(P.a,{md:"4",children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Amount"}),Object(n.jsx)(q.a.Control,{type:"number",min:"0",ref:F,disabled:u,defaultValue:L,required:!0})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:u,children:"Submit"}),!u&&Object(n.jsx)(R.b,{to:"/salary/".concat(r),className:"btn btn-danger",disabled:u,children:"Cancel"})]})})]})}function Fe(e){var t=e.activity,a=e.handleDelete,c=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[Object(n.jsx)("strong",{className:"mr-2",children:t.createAt})," ",t.type," - ",t.name,"  ",Object(n.jsxs)("strong",{className:"ml-2",children:["(",t.status,")"]}),Object(n.jsx)(F.a,{variant:"danger",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:a,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",className:"mr-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;c.push("/activity/edit/".concat(t))},children:"Edit"}),Object(n.jsx)(F.a,{variant:"secondary",className:"mr-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;c.push("/activity/detail/".concat(t))},children:"Detail"})]})})})}function Ae(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/activity/"),t=Object(c.useState)(!1),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(""),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)([]),x=Object(v.a)(m,2),g=x[0],k=x[1],w=l(),S=w.fetchQuery,L=w.logout,T=Object(c.useRef)(),F=Object(c.useRef)(),A=Object(c.useRef)(),I=Object(O.g)();function G(e){e.preventDefault();var t=""!==F.current.value?', status: "'.concat(F.current.value,'"'):"",a=""!==A.current.value?', type: "'.concat(A.current.value,'"'):"",n="Sys-Master"!==sessionStorage.getItem("role")?', id: "'.concat(sessionStorage.getItem("employeeId"),'"'):"";U('(keyword: "'.concat(T.current.value,'"').concat(t).concat(a).concat(n,")"))}function E(t){if(t.preventDefault(),u(""),s(!0),window.confirm("Are you sure want to delete this activity")){var a=t.target.dataset.id;S("".concat(e,"/").concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:I.push("/login");case 5:u(t.body.message),e.next=10;break;case 8:h(!p),u("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s(!1)}else s(!1)}function U(){return V.apply(this,arguments)}function V(){return(V=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",u(""),s(!0),a={query:"query {\n                employeeActivities ".concat(t," { id, employeeId, employee { id }, name, type, status, notes, createAt }\n            }")},S("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,L();case 5:I.push("/login");case 6:u(t.body.message),e.next=11;break;case 9:k(t.body.data.employeeActivities),u("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){"Sys-Master"===sessionStorage.getItem("role")?U():U('(id: "'.concat(sessionStorage.getItem("employeeId"),'")'))}),[p]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Activities"}),Object(n.jsxs)("div",{className:"mt-4",children:[d&&Object(n.jsx)(C.a,{variant:"danger",children:d}),Object(n.jsx)(R.b,{className:"btn btn-primary",to:"/activity/add",children:"Add New Activity"}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:G,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"4",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:T,onChange:G,disabled:r,placeholder:"Search by Name"})})}),Object(n.jsx)(P.a,{md:"3",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsxs)(q.a.Control,{as:"select",ref:F,onChange:G,children:[Object(n.jsx)("option",{value:"",children:"All Status"}),Object(n.jsx)("option",{value:"New",children:"New"}),Object(n.jsx)("option",{value:"On Progress",children:"On Progress"}),Object(n.jsx)("option",{value:"Done",children:"Done"})]})})}),Object(n.jsx)(P.a,{md:"3",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsxs)(q.a.Control,{as:"select",ref:A,onChange:G,children:[Object(n.jsx)("option",{value:"",children:"All Type"}),Object(n.jsx)("option",{value:"Permission",children:"Permission"}),Object(n.jsx)("option",{value:"Sick",children:"Sick"}),Object(n.jsx)("option",{value:"Paid Leave",children:"Paid Leave"}),Object(n.jsx)("option",{value:"Business Trip",children:"Business Trip"}),Object(n.jsx)("option",{value:"Overtime",children:"Overtime"})]})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:r,children:"Search"})})})]})}),g&&g.length>0?Object(n.jsx)(N.a,{style:{width:"50em"},className:"mt-4",children:g.map((function(e){return Object(n.jsx)(Fe,{activity:e,handleDelete:E},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function Ie(e){var t=e.activityId,a=Object(c.useState)([]),r=Object(v.a)(a,2),s=r[0],i=r[1],o=l(),d=o.fetchQuery,u=o.logout,j=Object(O.g)();return Object(c.useEffect)((function(){!function(){var e={query:'query {\n                approvals (activityId: "'.concat(t,'") {\n                  id,\n                  userId,\n                  level,\n                  approvedFlag,\n                  approvedDate,\n                  notes\n                  }\n              }')};d("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=8;break}if(403!==t.status){e.next=6;break}return e.next=5,u();case 5:j.push("/login");case 6:e.next=9;break;case 8:i(t.body.data.approvals.filter((function(e){return null!==e.approvalDate})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}()}),[]),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(N.a,{style:{width:"40em"},className:"mb-3",children:Object(n.jsx)(T.a,{variant:"flush",children:s.length>0&&s.map((function(e){return Object(n.jsx)(n.Fragment,{children:e.approvedDate&&Object(n.jsxs)(T.a.Item,{children:[Object(n.jsxs)("b",{children:["Level ",e.level]}),"  ",e.approvedDate," ",Object(n.jsx)("br",{})," ",e.notes,Object(n.jsx)(F.a,{variant:e.approvedFlag?"success":"danger",style:{float:"right"},"data-id":e.id,children:e.approvedFlag?"Approved":"Rejected"})]})})}))})})})}function Ge(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/activity/"),t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(""),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)([]),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(!1),S=Object(v.a)(w,2),N=S[0],L=S[1],T=Object(c.useState)(""),F=Object(v.a)(T,2),A=F[0],I=F[1],G=Object(c.useState)(0),E=Object(v.a)(G,2),U=E[0],V=E[1],B=Object(c.useState)({}),Q=Object(v.a)(B,2),M=Q[0],J=Q[1],z=l(),H=z.fetchQuery,W=z.logout,_=Object(O.g)(),Y=Object(c.useRef)(),K=Object(c.useRef)(),X=Object(c.useRef)(),Z=Object(c.useRef)(),$=Object(c.useRef)(),ee=Object(c.useRef)();return Object(c.useEffect)((function(){"add"!==r&&function(){h(""),u(!0);var e={query:'query {\n                employeeActivity (id: "'.concat(s,'") { id, type, name, status, notes, dateFrom, dateUntil\n                    reimburse { id, amount, status, file }\n                }\n            }')};H("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,W();case 4:_.push("/login");case 5:h(t.body.message),e.next=13;break;case 8:t.body.data.employeeActivity.reimburse[0]&&V(t.body.data.employeeActivity.reimburse[0].amount),I(t.body.data.employeeActivity.type),J(t.body.data.employeeActivity),L("Business Trip"===t.body.data.employeeActivity.type||"Overtime"===t.body.data.employeeActivity.type),h("");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u("detail"===r)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," Activity"]}),p&&Object(n.jsx)(C.a,{variant:"danger",children:p}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),h(""),u(!0);var n={type:Y.current.value,dateFrom:X.current.value,dateUntil:Z.current.value,notes:$.current.value};g.length>0&&(n.file=g[0]),ee.current&&(n.amount=ee.current.value),e="add"!==r?"".concat(e).concat(s):"".concat(e).concat(sessionStorage.getItem("employeeId")),"edit"===r&&(t="PUT"),H(e,n,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,W();case 4:_.push("/login");case 5:h(t.body.message),e.next=10;break;case 8:h(""),_.push("/activity");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)},children:Object(n.jsxs)(P.a,{md:"8",children:[Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"4",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Type"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:Y,value:A,required:!0,onChange:function(e){I(e.target.value),L("Business Trip"===Y.current.value||"Overtime"===Y.current.value)},disabled:d,children:[Object(n.jsx)("option",{value:"",hidden:!0,children:"Select Type"}),Object(n.jsx)("option",{value:"Permission",children:"Permission"}),Object(n.jsx)("option",{value:"Sick",children:"Sick"}),Object(n.jsx)("option",{value:"Paid Leave",children:"Paid Leave"}),Object(n.jsx)("option",{value:"Business Trip",children:"Business Trip"}),Object(n.jsx)("option",{value:"Overtime",children:"Overtime"})]})]})}),Object(n.jsx)(P.a,{md:"4",children:N&&Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Amount (Rp.)"}),Object(n.jsx)(q.a.Control,{type:"number",min:"0",ref:ee,required:!0,defaultValue:U,disabled:d})]})}),Object(n.jsx)(P.a,{md:"4",children:N&&!d&&Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Attachment"}),Object(n.jsx)("input",{type:"file",id:"file-upload",ref:K,accept:[".jpg",".jpeg",".png"],onChange:function(e){e.preventDefault();var t=e.target.id,a=new FileReader,n=e.target.files[0];a.onload=function(){k([].concat(Object(oe.a)(g),[{type:n.type,id:t,data:a.result}]))},a.readAsDataURL(n)}})]})})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Date From"}),Object(n.jsx)(q.a.Control,{type:"date",ref:X,disabled:d,defaultValue:Object.keys(M).length>0?M.dateFrom:"",required:!0})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Date Until"}),Object(n.jsx)(q.a.Control,{type:"date",ref:Z,disabled:d,defaultValue:Object.keys(M).length>0?M.dateUntil:"",required:!0})]})})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Notes"}),Object(n.jsx)(q.a.Control,{as:"textarea",ref:$,disabled:d,defaultValue:Object.keys(M).length>0?M.notes:"",required:!0})]}),"add"!==r&&Object.keys(M).length>0&&M.reimburse.length>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("a",{href:M.reimburse[0].file&&null!==M.reimburse[0].file?M.reimburse[0].file:"#",download:M.reimburse[0].file&&null!==M.reimburse[0].file?"Attachment Reimburse ".concat(M.notes," (").concat(M.name.replace("."," "),")"):null,children:[Object(n.jsx)("i",{className:"fa fa-download fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Download Attachment"})]}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),"detail"===r&&Object(n.jsx)(Ie,{activityId:s}),"detail"!==r&&Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:d,children:"Submit"}),Object(n.jsx)(R.b,{to:"/activity",className:"btn btn-danger",disabled:d,children:"Cancel"})]})})]})}function Ee(e){var t=e.approval,a=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[Object(n.jsx)("strong",{className:"mr-2",children:t.activity.createAt})," ",t.activity.type," - ",t.activity.name,Object(n.jsx)(F.a,{variant:"secondary",className:"mr-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;a.push("/approval/detail/".concat(t))},children:"Detail"})]})})})}function Ue(){"".concat("https://mini-company-backend.herokuapp.com/api","/approval/");var e=Object(c.useState)(!1),t=Object(v.a)(e,2),a=(t[0],t[1]),r=Object(c.useState)(""),s=Object(v.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)(!1),u=Object(v.a)(d,2),j=u[0],b=(u[1],Object(c.useState)([])),p=Object(v.a)(b,2),h=p[0],m=p[1],x=l(),g=x.fetchQuery,k=x.logout,w=(Object(c.useRef)(),Object(c.useRef)(),Object(c.useRef)(),Object(O.g)());function S(){return(S=Object(y.a)(f.a.mark((function e(){var t,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>0&&void 0!==n[0]?n[0]:"",o(""),a(!0),t={query:'query {\n                approvals (userId: "'.concat(sessionStorage.getItem("id"),'") {\n                    id,    \n                    userId,\n                    level,\n                    approvedFlag,\n                    approvedDate,\n                    notes,    \n                    activity { id, name, dateFrom, dateUntil, createAt, type, notes, reimburse { id } }\n                }\n            }')},g("https://mini-company-backend.herokuapp.com/graphql",t,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,k();case 5:w.push("/login");case 6:o(t.body.message),e.next=11;break;case 9:m(t.body.data.approvals),o("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){S.apply(this,arguments)}()}),[j]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Approval"}),Object(n.jsxs)("div",{className:"mt-4",children:[i&&Object(n.jsx)(C.a,{variant:"danger",children:i}),h.length>0?Object(n.jsx)(N.a,{style:{width:"40em"},className:"mt-4",children:h.map((function(e){return Object(n.jsx)(Ee,{approval:e},e.id)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function Ve(){var e=Object(O.h)(),t=e.type,a=e.id,r="".concat("https://mini-company-backend.herokuapp.com/api","/approval/").concat(a),s=Object(c.useState)(!1),i=Object(v.a)(s,2),o=i[0],d=i[1],u=Object(c.useState)(""),j=Object(v.a)(u,2),b=j[0],p=j[1],h=Object(c.useState)(!1),m=Object(v.a)(h,2),x=m[0],g=m[1],k=Object(c.useState)(""),w=Object(v.a)(k,2),S=w[0],N=w[1],L=Object(c.useState)(0),T=Object(v.a)(L,2),F=T[0],A=T[1],I=Object(c.useState)({}),G=Object(v.a)(I,2),E=G[0],U=G[1],V=l(),B=V.fetchQuery,Q=V.logout,M=Object(O.g)(),J=Object(c.useRef)(),z=Object(c.useRef)(),H=Object(c.useRef)(),W=Object(c.useRef)(),_=Object(c.useRef)();return Object(c.useEffect)((function(){!function(){p(""),d(!0);var e={query:'query {\n                approval (id: "'.concat(a,'") {\n                    id,\n                    activity { id, type, name, status, notes, dateFrom, dateUntil\n                        reimburse { id, amount, status, file }\n                    }\n                }\n            }')};B("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,Q();case 4:M.push("/login");case 5:p(t.body.message),e.next=13;break;case 8:A(t.body.data.approval.activity.reimburse[0].amount),N(t.body.data.approval.activity.type),U(t.body.data.approval.activity),g("Business Trip"===t.body.data.approval.activity.type||"Overtime"===t.body.data.approval.activity.type),p("");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d(!1)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Detail Activity"}),b&&Object(n.jsx)(C.a,{variant:"danger",children:b}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(e){e.preventDefault();var t=e.nativeEvent.submitter.id;if(window.confirm("Are you sure want to ".concat(t," this data?"))){p(""),d(!0);var a={userId:J.current.value,approvedFlag:"approve"===t,notes:W.current.value};B(r,a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,Q();case 5:M.push("/login");case 6:p(t.body.message),e.next=11;break;case 9:p(""),M.push("/approval");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d(!1)}},children:Object(n.jsxs)(P.a,{md:"8",children:[Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Type"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:J,value:S,disabled:!0,children:[Object(n.jsx)("option",{value:"",hidden:!0,children:"Select Type"}),Object(n.jsx)("option",{value:"Business Trip",children:"Business Trip"}),Object(n.jsx)("option",{value:"Overtime",children:"Overtime"})]})]})}),Object(n.jsx)(P.a,{md:"6",children:x&&Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Amount (Rp.)"}),Object(n.jsx)(q.a.Control,{type:"number",min:"0",ref:_,defaultValue:F,disabled:!0})]})})]}),Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Date From"}),Object(n.jsx)(q.a.Control,{type:"date",ref:z,disabled:!0,defaultValue:Object.keys(E).length>0?E.dateFrom:""})]})}),Object(n.jsx)(P.a,{md:"6",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Date Until"}),Object(n.jsx)(q.a.Control,{type:"date",ref:H,disabled:!0,defaultValue:Object.keys(E).length>0?E.dateUntil:""})]})})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Notes Activity"}),Object(n.jsx)(q.a.Control,{as:"textarea",disabled:!0,defaultValue:Object.keys(E).length>0?E.notes:""})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Notes Approval"}),Object(n.jsx)(q.a.Control,{as:"textarea",ref:W,required:!0,disabled:o})]}),"add"!==t&&Object.keys(E).length>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("a",{href:E.reimburse[0].file&&null!==E.reimburse[0].file?E.reimburse[0].file:"#",download:E.reimburse[0].file&&null!==E.reimburse[0].file?"Attachment Reimburse ".concat(E.notes," (").concat(E.name.replace("."," "),")"):null,children:[Object(n.jsx)("i",{className:"fa fa-download fa-fw fa-lg","aria-hidden":"true"}),"\xa0 ",Object(n.jsx)("span",{className:"text-weight",children:"Download Attachment"})]}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),Object(n.jsx)(D.a,{type:"submit",id:"approve",className:"mr-2",disabled:o,children:"Approve"}),Object(n.jsx)(D.a,{type:"submit",id:"reject",variant:"danger",className:"mr-2",disabled:o,children:"Reject"}),Object(n.jsx)(R.b,{to:"/activity",className:"btn btn-danger",children:"Cancel"})]})})]})}function Be(e){var t=e.reference,a=e.user,c=e.handleDelete,r=Object(O.g)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(T.a,{variant:"flush",children:Object(n.jsxs)(T.a.Item,{children:[a.name," - ",a.username,Object(n.jsx)(F.a,{variant:"danger",className:"ml-2",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:c,children:"Delete"}),Object(n.jsx)(F.a,{variant:"primary",style:{float:"right",cursor:"pointer"},"data-id":t.id,onClick:function(e){var t=e.target.dataset.id;r.push("/setupapproval/edit/".concat(t))},children:"Edit"})]})})})}function Qe(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/approval/setup"),t=Object(c.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)([]),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)([]),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(!1),S=Object(v.a)(w,2),q=(S[0],S[1],l()),D=q.fetchQuery,L=q.logout,P=Object(O.g)();function T(){return(T=Object(y.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(""),D("https://mini-company-backend.herokuapp.com/graphql",{query:"query { levels }"},!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:P.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:s(t.body.data.levels),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(t){if(t.preventDefault(),window.confirm("Are you sure want to delete this data?")){var a=t.target.dataset.id;console.log("".concat(e,"/").concat(a)),D("".concat(e,"/").concat(a),{},!0,"DELETE").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:P.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:window.location.reload(),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}function A(){return(A=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",k(""),a={query:"query {\n                users ".concat(t," { id, username, name, email, role, activeFlag }\n            }")},D("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:P.push("/login");case 5:k(t.body.message),e.next=11;break;case 8:h(t.body.data.users),I(),k("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return G.apply(this,arguments)}function G(){return(G=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",k(""),a={query:"query { approvalReferences ".concat(t," { id, userId, level } }")},D("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,L();case 4:P.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:u(t.body.data.approvalReferences),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){T.apply(this,arguments)}(),function(){A.apply(this,arguments)}()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{children:"Setup Approval"}),Object(n.jsxs)("div",{className:"mt-4",children:[g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(R.b,{to:"/setupapproval/add",className:"btn btn-primary",children:"Add New Reference"}),r.length>0?r.map((function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h4",{className:"mt-4",children:["Level ",e]}),Object(n.jsx)(N.a,{style:{width:"50em"},className:"mt-2 mb-4",children:d.filter((function(t){return t.level===e})).map((function(e){return Object(n.jsx)(Be,{reference:e,user:p.filter((function(t){return t.id===e.userId}))[0],handleDelete:F},e.id)}))})]})})):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]})]})}function Me(){var e="".concat("https://mini-company-backend.herokuapp.com/api","/approval/setup"),t="POST",a=Object(O.h)(),r=a.type,s=a.id,i=Object(c.useState)(!1),o=Object(v.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(v.a)(j,2),p=b[0],h=b[1],m=Object(c.useState)(""),x=Object(v.a)(m,2),g=x[0],k=x[1],w=Object(c.useState)(""),S=Object(v.a)(w,2),L=S[0],T=S[1],F=Object(c.useState)(),A=Object(v.a)(F,2),I=A[0],G=A[1],E=Object(c.useState)(!1),U=Object(v.a)(E,2),V=U[0],B=U[1],Q=Object(c.useState)([]),M=Object(v.a)(Q,2),J=M[0],z=M[1],W=Object(c.useState)([]),_=Object(v.a)(W,2),Y=_[0],K=_[1],X=Object(c.useRef)(),Z=Object(c.useRef)(),$=Object(c.useRef)(),ee=Object(O.g)(),te=function(){return B(!1)},ae=l(),ne=ae.fetchQuery,ce=ae.logout;function re(e){e.preventDefault(),oe('(search: "'.concat($.current.value,'", active: true)'))}function se(e){var t=e.target.dataset.id;te(),T(t)}function ie(){return(ie=Object(y.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(""),ne("https://mini-company-backend.herokuapp.com/graphql",{query:"query { levels }"},!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ce();case 4:ee.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:K(t.body.data.levels),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return le.apply(this,arguments)}function le(){return(le=Object(y.a)(f.a.mark((function e(){var t,a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"(active: true)",k(""),a={query:"query {\n                users ".concat(t," { id, username, name, email, role, activeFlag }\n            }")},ne("https://mini-company-backend.herokuapp.com/graphql",a,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ce();case 4:ee.push("/login");case 5:k(t.body.message),e.next=10;break;case 8:z(t.body.data.users),k("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){if(function(){ie.apply(this,arguments)}(),oe(),"edit"===r){k(""),u(!0);var e={query:'query {\n                    approvalReference (id: "'.concat(s,'") {id, userId, level }  \n                }')};ne("https://mini-company-backend.herokuapp.com/graphql",e,!0,"POST").then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200===t.status){e.next=8;break}if(403!==t.status){e.next=5;break}return e.next=4,ce();case 4:ee.push("/login");case 5:k(t.body.message),e.next=11;break;case 8:T(t.body.data.approvalReference.userId),G(t.body.data.approvalReference.level),k("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h3",{children:[r.charAt(0).toUpperCase()+r.slice(1)," User"]}),g&&Object(n.jsx)(C.a,{variant:"danger",children:g}),Object(n.jsx)(q.a,{className:"mt-4",onSubmit:function(a){a.preventDefault(),u(!0),k("");var n={userId:Z.current.value,level:X.current.value};"edit"===r&&(n={level:X.current.value},e="".concat(e,"/").concat(s),t="PUT"),console.log(t),ne(e,n,!0,t).then(function(){var e=Object(y.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),200===t.status){e.next=9;break}if(403!==t.status){e.next=6;break}return e.next=5,ce();case 5:ee.push("/login");case 6:k(t.body.message),e.next=12;break;case 9:h(!p),k(""),ee.push("/setupapproval");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u(!1)},children:Object(n.jsxs)(P.a,{md:"8",children:[Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"7",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"User"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:Z,disabled:d||"edit"===r,value:L,onChange:function(e){return T(e.target.value)},children:[Object(n.jsx)("option",{value:"",hidden:!0,children:"Select User"}),J.map((function(e){return Object(n.jsxs)("option",{value:e.id,children:[e.name," - ",e.username]},e.id)}))]})]})}),Object(n.jsx)(P.a,{md:"1",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"\xa0"}),Object(n.jsx)(D.a,{className:"mb-0 fa fa-search form-control",onClick:function(){return B(!0)}})]})}),Object(n.jsx)(P.a,{md:"3",children:Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Level"}),Object(n.jsxs)(q.a.Control,{as:"select",ref:X,disabled:d,value:I,onChange:function(e){return G(e.target.value)},children:[Object(n.jsx)("option",{value:"",hidden:!0,children:"Select Level"}),Y.map((function(e,t){return Object(n.jsx)("option",{value:t+1,children:t+1},e)})),Object(n.jsx)("option",{value:Y.length+1,children:Y.length+1})]})]})})]}),Object(n.jsx)(D.a,{type:"submit",className:"mr-2",disabled:d,children:"Submit"}),!d&&Object(n.jsx)(R.b,{to:"/setupapproval",className:"btn btn-danger",disabled:d,children:"Cancel"})]})}),Object(n.jsxs)(ke.a,{size:"lg",show:V,onHide:te,children:[Object(n.jsx)(ke.a.Header,{closeButton:!0,children:Object(n.jsx)(ke.a.Title,{children:"Search User"})}),Object(n.jsxs)(ke.a.Body,{children:[Object(n.jsx)(q.a,{className:"mt-4",onSubmit:re,children:Object(n.jsxs)(q.a.Row,{children:[Object(n.jsx)(P.a,{md:"5",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{type:"text",ref:$,onChange:re,disabled:d,placeholder:"Search by Name"})})}),Object(n.jsx)(P.a,{md:"2",children:Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(D.a,{variant:"success",type:"submit",disabled:d,children:"Search"})})})]})}),J.length>0?Object(n.jsx)(N.a,{style:{width:"40em"},className:"mt-4",children:J.map((function(e){return Object(n.jsx)(H,{user:e,handleChoose:se},e.username)}))}):Object(n.jsx)("div",{className:"mt-4 text-weight text-muted col-md-6 text-center",children:Object(n.jsx)("span",{children:"No Data"})})]}),Object(n.jsx)(ke.a.Footer,{children:Object(n.jsx)(D.a,{variant:"secondary",onClick:te,children:"Close"})})]})]})}var Je=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(R.a,{children:Object(n.jsx)(b,{children:Object(n.jsxs)(O.d,{children:[Object(n.jsx)(m,{exact:!0,path:"/",component:{topbar:g,sidebar:w,content:S}}),Object(n.jsx)(m,{exact:!0,path:"/application",component:{topbar:g,sidebar:w,content:I}}),Object(n.jsx)(m,{path:"/application/:type/:id?",component:{topbar:g,sidebar:w,content:G}}),Object(n.jsx)(m,{path:"/menu/:id?",component:{topbar:g,sidebar:w,content:B}}),Object(n.jsx)(m,{exact:!0,path:"/role",component:{topbar:g,sidebar:w,content:M}}),Object(n.jsx)(m,{path:"/role/:type/:id?",component:{topbar:g,sidebar:w,content:J}}),Object(n.jsx)(m,{path:"/access",component:{topbar:g,sidebar:w,content:z}}),Object(n.jsx)(m,{exact:!0,path:"/user",component:{topbar:g,sidebar:w,content:W}}),Object(n.jsx)(m,{path:"/user/:type/:id?",component:{topbar:g,sidebar:w,content:_}}),Object(n.jsx)(m,{path:"/profile",component:{topbar:g,sidebar:w,content:Y}}),Object(n.jsx)(O.b,{path:"/login",component:L}),Object(n.jsx)(m,{exact:!0,path:"/job",component:{topbar:g,sidebar:w,content:$}}),Object(n.jsx)(m,{path:"/job/:type/:id?",component:{topbar:g,sidebar:w,content:ae}}),Object(n.jsx)(m,{exact:!0,path:"/qna",component:{topbar:g,sidebar:w,content:$}}),Object(n.jsx)(m,{path:"/qna/list/:idjob",component:{topbar:g,sidebar:w,content:ie}}),Object(n.jsx)(m,{path:"/qna/:idjob/:type/:id?",component:{topbar:g,sidebar:w,content:ue}}),Object(n.jsx)(m,{exact:!0,path:"/candidate",component:{topbar:g,sidebar:w,content:be}}),Object(n.jsx)(m,{path:"/candidate/:type/:id?",component:{topbar:g,sidebar:w,content:Oe}}),Object(n.jsx)(m,{exact:!0,path:"/applications",component:{topbar:g,sidebar:w,content:$}}),Object(n.jsx)(m,{path:"/applications/list/:idjob",component:{topbar:g,sidebar:w,content:re}}),Object(n.jsx)(m,{exact:!0,path:"/division",component:{topbar:g,sidebar:w,content:xe}}),Object(n.jsx)(m,{path:"/division/:type/:id?",component:{topbar:g,sidebar:w,content:fe}}),Object(n.jsx)(m,{exact:!0,path:"/department",component:{topbar:g,sidebar:w,content:ve}}),Object(n.jsx)(m,{path:"/department/:type/:id?",component:{topbar:g,sidebar:w,content:ge}}),Object(n.jsx)(m,{exact:!0,path:"/employee",component:{topbar:g,sidebar:w,content:Ne}}),Object(n.jsx)(m,{path:"/employee/:type/:id?",component:{topbar:g,sidebar:w,content:Ce}}),Object(n.jsx)(m,{exact:!0,path:"/contract/:idemployee",component:{topbar:g,sidebar:w,content:De}}),Object(n.jsx)(m,{path:"/contract/:idemployee/:type/:id?",component:{topbar:g,sidebar:w,content:Re}}),Object(n.jsx)(m,{exact:!0,path:"/salary/:idemployee",component:{topbar:g,sidebar:w,content:Pe}}),Object(n.jsx)(m,{path:"/salary/:idemployee/:type/:id?",component:{topbar:g,sidebar:w,content:Te}}),Object(n.jsx)(m,{exact:!0,path:"/activity",component:{topbar:g,sidebar:w,content:Ae}}),Object(n.jsx)(m,{path:"/activity/:type/:id?",component:{topbar:g,sidebar:w,content:Ge}}),Object(n.jsx)(m,{exact:!0,path:"/approval",component:{topbar:g,sidebar:w,content:Ue}}),Object(n.jsx)(m,{path:"/approval/detail/:id?",component:{topbar:g,sidebar:w,content:Ve}}),Object(n.jsx)(m,{exact:!0,path:"/setupapproval",component:{topbar:g,sidebar:w,content:Qe}}),Object(n.jsx)(m,{path:"/setupapproval/:type/:id?",component:{topbar:g,sidebar:w,content:Me}})]})})})})};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(Je,{})}),document.getElementById("root"))}},[[322,1,2]]]);
//# sourceMappingURL=main.d6e7ab2f.chunk.js.map